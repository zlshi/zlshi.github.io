<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/blog/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/blog/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="编程语言, 操作系统, 算法, 生活, 炼丹, Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="MarginStone&#39;s blog">
<meta property="og:url" content="http://www.iaihe.cn/blog/index.html">
<meta property="og:site_name" content="MarginStone&#39;s blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MarginStone&#39;s blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.iaihe.cn/blog/"/>





  <title>MarginStone's blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b6e32040595c97e2ab9b9ab86d76040c";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/blog/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">MarginStone's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">记录点滴-旺仔&AD钙</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/blog/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/blog/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/blog/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.iaihe.cn/blog/blog/2018/08/02/MySQL-Event/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zlshi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MarginStone's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/08/02/MySQL-Event/" itemprop="url">MySQL Event</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-02T10:00:00+08:00">
                2018-08-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/MySQL/" itemprop="url" rel="index">
                    <span itemprop="name">MySQL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-Event-简介"><a href="#1-Event-简介" class="headerlink" title="1.Event 简介"></a>1.Event 简介</h1><p>MySQL的Event是在相应的时刻调用的过程式数据库对象，由MySQL的事件调度器(Event Scheduler)来管理。<br>事件取代了原先只能由操作系统的计划任务来执行的工作，而且MySQL的事件调度器可以精确到每秒钟执行一个任务。</p>
<h1 id="2-查看当前是否开启event-scheduler"><a href="#2-查看当前是否开启event-scheduler" class="headerlink" title="2. 查看当前是否开启event scheduler"></a>2. 查看当前是否开启event scheduler</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">i:  <span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'%event_scheduler%'</span>;</div><div class="line">ii: <span class="keyword">select</span> @@event_scheduler;</div><div class="line">iii: <span class="keyword">show</span> <span class="keyword">processlist</span>; (是否有State为: Waiting for next activation的进程，User为event_scheduler)</div></pre></td></tr></table></figure>
<p>第一种：</p>
<p><img src="/blog/images/pasted-1.png" alt="upload successful"></p>
<p>第二种：</p>
<p><img src="/blog/images/pasted-2.png" alt="upload successful"></p>
<p>第三种：</p>
<p><img src="/blog/images/pasted-3.png" alt="upload successful"></p>
<h1 id="3-启动和关闭event-scheduler方法"><a href="#3-启动和关闭event-scheduler方法" class="headerlink" title="3. 启动和关闭event scheduler方法"></a>3. 启动和关闭event scheduler方法</h1><p>事件调度器由全局变量event_scheduler决定，它有三个可设定值：</p>
<ul>
<li>OFF</li>
<li>ON</li>
<li>DISABLED</li>
</ul>
<p>OFF:  事件调度器是关闭的，调度线程没有运行，并且在show processlist中不显示，默认值是OFF。</p>
<p>ON:  事件调度器是开启的，并且执行所有的调度事件，通过show processlist可以查看Waiting for next activation的进程。</p>
<p>DISABLED:  设置此值表示Event Scheduler是被禁止的，无法在MySQL运行状态下改变其值。</p>
<p><strong>注意:</strong><br>在MySQL启动时如果在my.cnf设置了event_scheduler=ON|OFF|1|0时，就不能在运行时修改为DISABLED，如果设置event_scheduler=DISBALED时，就不能在运行时修改其值为ON|OFF|1|0。</p>
<p>启动Event:<br><figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SET</span> GLOBAL <span class="comment">event_scheduler = ON</span>;</div><div class="line"><span class="keyword">SET</span> @@global.event_scheduler <span class="comment">= ON</span>;</div><div class="line"><span class="keyword">SET</span> GLOBAL <span class="comment">event_scheduler = 1</span>;</div><div class="line"><span class="keyword">SET</span> @@hlobal.event_scheduler <span class="comment">= 1</span>;</div></pre></td></tr></table></figure></p>
<p>关闭Event:<br><figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SET</span> GLOBAL <span class="comment">event_scheduler = OFF</span>;</div><div class="line"><span class="keyword">SET</span> @@global.event_scheduler <span class="comment">= OFF</span>;</div><div class="line"><span class="keyword">SET</span> GLOBAL <span class="comment">event_scheduler = 0</span>;</div><div class="line"><span class="keyword">SET</span> @@global.event_scheduler <span class="comment">= 0</span>;</div></pre></td></tr></table></figure></p>
<h1 id="4-创建Event"><a href="#4-创建Event" class="headerlink" title="4. 创建Event"></a>4. 创建Event</h1><p>每个事件由两个主要部分组成，第一部分是事件调度(Event Scheduler)，表示事件何时启动以及按什么频率启动，第二部分是事件动作(Event Action)，是事件启动时执行的代码，事件动作可以是SQL语句、存储过程、begin…end语句块。</p>
<h2 id="4-1-语法"><a href="#4-1-语法" class="headerlink" title="4.1 语法"></a>4.1 语法</h2><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">CREATE</div><div class="line">    [DEFINER = &#123; user | <span class="type">CURRENT_USER</span> &#125;]</div><div class="line">    EVENT</div><div class="line">    [<span class="keyword">IF</span> NOT EXISTS]</div><div class="line">    event_name</div><div class="line">    ON SCHEDULE schedule</div><div class="line">    [ON COMPLETION [NOT] PRESERVE]</div><div class="line">    [ENABLE | <span class="type">DISABLE</span> | <span class="type">DISABLE</span> ON SLAVE]</div><div class="line">    [COMMENT 'string']</div><div class="line">    DO event_body;</div><div class="line"></div><div class="line">schedule:</div><div class="line">    AT timestamp [+ INTERVAL interval] ...</div><div class="line">  | <span class="type">EVERY</span> interval</div><div class="line">    [STARTS timestamp [+ INTERVAL interval] ...]</div><div class="line">    [ENDS timestamp [+ INTERVAL interval] ...]</div><div class="line"></div><div class="line">interval:</div><div class="line">    quantity &#123;YEAR | <span class="type">QUARTER</span> | <span class="type">MONTH</span> | <span class="type">DAY</span> | <span class="type">HOUR</span> | <span class="type">MINUTE</span> |<span class="type"></span></div><div class="line"><span class="type">              WEEK</span> | <span class="type">SECOND</span> | <span class="type">YEAR_MONTH</span> | <span class="type">DAY_HOUR</span> | <span class="type">DAY_MINUTE</span> |<span class="type"></span></div><div class="line"><span class="type">              DAY_SECOND</span> | <span class="type">HOUR_MINUTE</span> | <span class="type">HOUR_SECOND</span> | <span class="type">MINUTE_SECOND</span>&#125;</div></pre></td></tr></table></figure>
<p>说明：</p>
<p>DEFINER默认是当前创建Event的用户，服务器在执行该事件时，使用该用户来检查权限。</p>
<p>ON SCHEDULE 用来指定事件执行的时间和频率。</p>
<p>[ON COMPLETION [NOT] PRESERVE] 设置事件执行完毕后是否自动drop该事件，ON COMPLETION PRESERVE则不会被drop掉。</p>
<p>AT timestamp 表示在给定的timestamp或者datetime的时间执行一次</p>
<p>INTERVAL interval 表示从AT timestamp多久之后执行</p>
<p>EVERY interval 重复执行时间粒度</p>
<p>[ENABLE|DISABLE] 设置该事件创建后状态是否开启或关闭，默认为ENABLE</p>
<h2 id="4-2-例子"><a href="#4-2-例子" class="headerlink" title="4.2 例子"></a>4.2 例子</h2><p>创建事件表events_list用来记录事件调度的名字和时间戳，然后创建Event每秒执行一次。</p>
<h3 id="4-2-1-创建测试表"><a href="#4-2-1-创建测试表" class="headerlink" title="4.2.1 创建测试表"></a>4.2.1 创建测试表</h3><p><img src="/blog/images/eventsList.png" alt="upload successful"></p>
<h3 id="4-2-2-创建事件"><a href="#4-2-2-创建事件" class="headerlink" title="4.2.2 创建事件"></a>4.2.2 创建事件</h3><p><img src="/blog/images/event.png" alt="upload successful"></p>
<p>查看事件执行结果：</p>
<p><img src="/blog/images/eventRes.png" alt="upload successful"></p>
<h1 id="5-查看事件"><a href="#5-查看事件" class="headerlink" title="5. 查看事件"></a>5. 查看事件</h1><p>show events；显示当前库中的事件。</p>
<p><img src="/blog/images/showEvent.png" alt="upload successful"><br><img src="/blog/images/pasted-4.png" alt="filename already exists, renamed"></p>
<h1 id="6-修改事件"><a href="#6-修改事件" class="headerlink" title="6. 修改事件"></a>6. 修改事件</h1><p>通过alter event语句可以修改事件的定义和属性，可以使一个事件成为停止的或者再次让它活动，也可以修改一个事件的名字或者整个调度，然而当使用ON COMPLETION NOT PRESERVE属性定义的事件最后一次执行后，事件就会被删除，不能修改。</p>
<h2 id="6-1-语法"><a href="#6-1-语法" class="headerlink" title="6.1 语法"></a>6.1 语法</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">ALTER</span></div><div class="line">    [DEFINER = &#123; <span class="keyword">user</span> | <span class="keyword">CURRENT_USER</span> &#125;]</div><div class="line">    <span class="keyword">EVENT</span> event_name</div><div class="line">    [<span class="keyword">ON</span> SCHEDULE schedule]</div><div class="line">    [<span class="keyword">ON</span> COMPLETION [<span class="keyword">NOT</span>] <span class="keyword">PRESERVE</span>]</div><div class="line">    [<span class="keyword">RENAME</span> <span class="keyword">TO</span> new_event_name]</div><div class="line">    [<span class="keyword">ENABLE</span> | <span class="keyword">DISABLE</span> | <span class="keyword">DISABLE</span> <span class="keyword">ON</span> <span class="keyword">SLAVE</span>]</div><div class="line">    [<span class="keyword">COMMENT</span> <span class="string">'string'</span>]</div><div class="line">    [<span class="keyword">DO</span> event_body]</div></pre></td></tr></table></figure>
<p>比如： 修改上面创建的事件为每一分钟执行一次<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">alter</span> <span class="keyword">event</span> event_every_second <span class="keyword">on</span> schedule</div><div class="line">every <span class="number">1</span> <span class="keyword">minute</span></div><div class="line"><span class="keyword">do</span> <span class="keyword">insert</span> <span class="keyword">into</span> events_list <span class="keyword">values</span>(<span class="string">'event_now'</span>, <span class="keyword">now</span>());</div></pre></td></tr></table></figure></p>
<p><img src="/blog/images/alterEvent.png" alt="upload successful"></p>
<p>修改事件为不再活动</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">alter</span> <span class="keyword">event</span> event_every_second <span class="keyword">disable</span>;</div></pre></td></tr></table></figure>
<h1 id="7-删除事件"><a href="#7-删除事件" class="headerlink" title="7. 删除事件"></a>7. 删除事件</h1><p>语法：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">DROP</span> <span class="keyword">EVENT</span> [<span class="keyword">IF</span> <span class="keyword">EXISTS</span>] event_name</div></pre></td></tr></table></figure></p>
<p><img src="/blog/images/dropEvent.png" alt="upload successful"></p>
<p>========================================================================</p>
<p>通过使用Event 机制可以完成一些数据库的定时操作，比如分区表的自动管理，将在分区表中进行介绍。</p>
<p><strong>Reference:</strong></p>
<p><a href="https://blog.csdn.net/JesseYoung/article/details/35257527" target="_blank" rel="external">https://blog.csdn.net/JesseYoung/article/details/35257527</a></p>
<p>&lt;<a href="http://www.simlinux.com/2014/08/19/mysql-event-scheduler.html" target="_blank" rel="external">http://www.simlinux.com/2014/08/19/mysql-event-scheduler.html</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.iaihe.cn/blog/blog/2018/08/02/Linux操作系统下Vim、Tmux-、Git、Zsh的配置与使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zlshi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MarginStone's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/08/02/Linux操作系统下Vim、Tmux-、Git、Zsh的配置与使用/" itemprop="url">Linux操作系统下Vim、Tmux 、Git、Zsh的配置与使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-02T09:52:32+08:00">
                2018-08-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/问题笔记/" itemprop="url" rel="index">
                    <span itemprop="name">问题笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.iaihe.cn/blog/blog/2018/08/02/JNI使用示例/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zlshi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MarginStone's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/08/02/JNI使用示例/" itemprop="url">JNI使用示例</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-02T09:52:13+08:00">
                2018-08-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/问题笔记/" itemprop="url" rel="index">
                    <span itemprop="name">问题笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>转载于<a href="http://www.ibm.com/developerworks/java/tutorials/j-jni/j-jni.html#step5" title="JNI使用示例" target="_blank" rel="external">http://www.ibm.com/developerworks/java/tutorials/j-jni/j-jni.html#step5</a></p>
<p>JNI lets Java code use code and code libraries written in other languages, such as C and C++. The Invocation API, which is part of JNI, can be used to embed a Java virtual machine (JVM) into native applications, thereby allowing programmers to call Java code from within native code.</p>
<p>This tutorial deals with the two most common applications of JNI: calling C/C++ code from Java programs, and calling Java code from C/C++ programs. We’ll cover both the essentials of the Java Native Interface and some of the more advanced programming challenges that can arise.</p>
<p>需要的工具和组件</p>
<ul>
<li>A <strong>Java compiler</strong>: <code>javac.exe</code> ships with the SDK.</li>
<li>A <strong>Java virtual machine (JVM)</strong>: <code>java.exe</code> ships with the SDK.</li>
<li>A <strong>native method C file generator</strong>: <code>javah.exe</code> ships with the SDK.</li>
<li><strong>Library files and native header files</strong> that define JNI. The jni.h C header file, jvm.lib, and jvm.dll or jvm.so files all ship with the SDK.</li>
<li>A <strong>C and C++ compiler</strong> that can create a shared library. The two most common C compilers are Visual C++ for Windows and <code>cc</code> for UNIX-based systems.</li>
<li>即需要安装Java development kit</li>
<li>C或者C++的编译器，本实验使用jdk1.8  ubuntu14.04操作系统 GCC编译器。</li>
</ul>
<h2 id="Calling-C-C-code-from-Java-programs（从Java程序中调用C-C-代码）"><a href="#Calling-C-C-code-from-Java-programs（从Java程序中调用C-C-代码）" class="headerlink" title="Calling C/C++ code from Java programs（从Java程序中调用C/C++代码）"></a>Calling C/C++ code from Java programs（从Java程序中调用C/C++代码）</h2><p>&nbsp;</p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.iaihe.cn/blog/blog/2017/11/21/Java反射/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zlshi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MarginStone's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2017/11/21/Java反射/" itemprop="url">Java反射</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-21T17:10:08+08:00">
                2017-11-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/Java基础/" itemprop="url" rel="index">
                    <span itemprop="name">Java基础</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考自<a href="http://tutorials.jenkov.com/java-reflection/classes.html" target="_blank" rel="external">jenkov java-reflection</a></p>
<h1 id="Classes"><a href="#Classes" class="headerlink" title="Classes"></a>Classes</h1><p>使用Java反射，可以在运行时检查Java类。在使用Reflection时，可以从Classes获取以下信息：</p>
<ul>
<li><strong>Class Name</strong></li>
<li><strong>Class Modifies(public,private,synchronized etc.)</strong></li>
<li><strong>Package Info</strong></li>
<li><strong>Superclass</strong></li>
<li><strong>Implemented Interfaces</strong></li>
<li><strong>Constructors</strong></li>
<li><strong>Methods</strong></li>
<li><strong>Fields</strong></li>
<li><strong>Anonotations</strong></li>
</ul>
<p>更具体的API列表参见<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="java.lang.Class" target="_blank" rel="external">JavaDoc</a></p>
<h2 id="The-Class-Object"><a href="#The-Class-Object" class="headerlink" title="The Class Object"></a>The Class Object</h2><p>Java中所有类型（包括int,long,float等原始类型、数组）均有相关的Class对象，如果你在编译阶段知道某个类的名字，则可以使用如下方法获得这个Class对象：<br><figure class="highlight cos"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Class</span> myObjectClass = MyObject.<span class="keyword">class</span></div></pre></td></tr></table></figure></p>
<p>如果在编译阶段不知道类的名字，但在运行阶段有类的名字，可以使用如下方法得到Class对象:<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">String</span> className = ...<span class="comment">//obtain class name as string at runtime</span></div><div class="line"><span class="keyword">Class</span> <span class="keyword">class</span> = <span class="keyword">Class</span>.forName(className)</div></pre></td></tr></table></figure></p>
<p>当使用Class.forName()方法的时候，必须提供全路径的类名（包括包名），此方法在classpath下找不到指定的类时，会抛出ClassNotFoundException异常。</p>
<h2 id="Class-Name"><a href="#Class-Name" class="headerlink" title="Class Name"></a>Class Name</h2><p>从Class对象中获取其名字有两种方法，分别是getName()和getSimpleName()，其中getName()方法包括包名，getSimpleName()没有包名。<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Class</span> aClass = ... <span class="comment">//obtain Class object. see The Class Object section</span></div><div class="line"><span class="keyword">String</span> className = aClass.getName();</div><div class="line"><span class="keyword">String</span> simpleClassName = aClass.getSimpleName();</div></pre></td></tr></table></figure></p>
<h2 id="Modifiers"><a href="#Modifiers" class="headerlink" title="Modifiers"></a>Modifiers</h2><p>使用Class对象可以知道类的public private static等信息。<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Class aClass = ...<span class="comment">//obtain Class object. See prev. section</span></div><div class="line"><span class="keyword">int</span> modifiers = aClass.<span class="built_in">getModifiers</span>();</div></pre></td></tr></table></figure></p>
<p>信息被存储在返回的int型modifier中的二进制位上，使用java.lang.reflect.Modifier提供的方法来测试。<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Modifier.isAbstract(<span class="keyword">int</span> modifiers)</div><div class="line">Modifier.isFinal(<span class="keyword">int</span> modifiers)</div><div class="line">Modifier.isInterface(<span class="keyword">int</span> modifiers)</div><div class="line">Modifier.isNative(<span class="keyword">int</span> modifiers)</div><div class="line">Modifier.isPrivate(<span class="keyword">int</span> modifiers)</div><div class="line">Modifier.isProtected(<span class="keyword">int</span> modifiers)</div><div class="line">Modifier.isPublic(<span class="keyword">int</span> modifiers)</div><div class="line">Modifier.isStatic(<span class="keyword">int</span> modifiers)</div><div class="line">Modifier.isStrict(<span class="keyword">int</span> modifiers)</div><div class="line">Modifier.isSynchronized(<span class="keyword">int</span> modifiers)</div><div class="line">Modifier.isTransient(<span class="keyword">int</span> modifiers)</div><div class="line">Modifier.isVolatile(<span class="keyword">int</span> modifiers)</div></pre></td></tr></table></figure></p>
<h2 id="Package-Info"><a href="#Package-Info" class="headerlink" title="Package Info"></a>Package Info</h2><p>使用Class对象也可以获得包信息：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Class</span>  aClass = ... <span class="comment">//obtain Class object. See prev. section</span></div><div class="line"><span class="keyword">Package</span> <span class="keyword">package</span> = aClass.getPackage();</div></pre></td></tr></table></figure></p>
<p>可以使用Package对象获得包的相关信息，具体参看<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Package.html" target="_blank" rel="external">java.lang.package</a></p>
<h2 id="Superclass"><a href="#Superclass" class="headerlink" title="Superclass"></a>Superclass</h2><p>获得当前Class对象的Superclass对象的方法如下：<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">Class superclass</span> = aClass.getSuperclass();</div></pre></td></tr></table></figure></p>
<h2 id="Implemented-Interfaces"><a href="#Implemented-Interfaces" class="headerlink" title="Implemented Interfaces"></a>Implemented Interfaces</h2><p>得到类实现的接口列表的方法如下：<br><figure class="highlight monkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">Class</span>  <span class="title">aClass</span> = ... //<span class="title">obtain</span> <span class="title">Class</span> <span class="title">object</span>. <span class="title">See</span> <span class="title">prev</span>. <span class="title">section</span></span></div><div class="line"><span class="class"><span class="keyword">Class</span>[] <span class="title">interfaces</span> = <span class="title">aClass</span>.<span class="title">getInterfaces</span>();</span></div></pre></td></tr></table></figure></p>
<p>会返回当前类中声明实现的接口列表，对于父类中实现的接口而在子类中未声明实现，则不会返回到接口列表中，如果要获得当前类实现的所有接口列表需要递归父类的接口列表进行合并。</p>
<h2 id="Constructors"><a href="#Constructors" class="headerlink" title="Constructors"></a>Constructors</h2><p>获得构造器的方法如下：<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">Constructor</span>[] <span class="title">constructors</span> = <span class="title">aClass</span>.<span class="title">getConstructors</span><span class="params">()</span>;</span></div></pre></td></tr></table></figure></p>
<p>对构造器的说明将在下面章节中更详细的介绍。</p>
<h2 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h2><p>获得方法列表的方法如下：<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">Method</span>[] <span class="title">method</span> = <span class="title">aClass</span>.<span class="title">getMethods</span><span class="params">()</span>;</span></div></pre></td></tr></table></figure></p>
<p>更详细的说明见下面Methods章节。</p>
<h2 id="Fields"><a href="#Fields" class="headerlink" title="Fields"></a>Fields</h2><p>获得域列表的方法如下：<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Field[] <span class="function"><span class="keyword">method</span> = <span class="title">aClass</span>.<span class="title">getFields</span><span class="params">()</span>;</span></div></pre></td></tr></table></figure></p>
<p>更详细的说明见下面Fields章节。</p>
<h2 id="Annotations"><a href="#Annotations" class="headerlink" title="Annotations"></a>Annotations</h2><p>获得注解列表的方法如下：<br><figure class="highlight abnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Annotation[] annotations = aClass.getAnnotations()<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<p>更详细的说明见下面Annotations章节。</p>
<h1 id="Constructors-1"><a href="#Constructors-1" class="headerlink" title="Constructors"></a>Constructors</h1><h2 id="Obtaining-Constructor-Objects"><a href="#Obtaining-Constructor-Objects" class="headerlink" title="Obtaining Constructor Objects"></a>Obtaining Constructor Objects</h2><p>使用Class对象可以得到Constructor对象：<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Class</span> aClass = ...<span class="comment">//obtain class object</span></div><div class="line"><span class="function"><span class="keyword">Constructor</span>[] <span class="title">constructors</span> = <span class="title">aClass</span>.<span class="title">getConstructors</span><span class="params">()</span>;</span></div></pre></td></tr></table></figure></p>
<p>会返回类中所有声明的public构造器，如果已知构造i器的参数个数和类型，则可以获得具体的构造器。比如：<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Class</span> aClass = ...<span class="comment">//obtain class object</span></div><div class="line"><span class="function"><span class="keyword">Constructor</span> <span class="title">constructor</span> = <span class="title">aClass</span>.<span class="title">getConstructor</span><span class="params">(<span class="keyword">new</span> <span class="keyword">Class</span>[]&#123;String.<span class="keyword">class</span>&#125;)</span>;</span></div></pre></td></tr></table></figure></p>
<p>如果没有匹配参数的构造器，则会抛出NoSuchMethodException异常。</p>
<h2 id="Constructor-Parameters"><a href="#Constructor-Parameters" class="headerlink" title="Constructor Parameters"></a>Constructor Parameters</h2><p>通过getParameterTypes()方法得到Constructor的参数列表：<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">Constructor</span> <span class="title">constructor</span> = ...<span class="comment">// obtain constructor -see above</span></span></div><div class="line"><span class="function"><span class="title">Class</span> [] <span class="title">parameterTypes</span> = <span class="title">constructor</span>.<span class="title">getParameterTypes</span><span class="params">()</span>;</span></div></pre></td></tr></table></figure></p>
<h2 id="Instantiating-Objects-using-Constructor-Object"><a href="#Instantiating-Objects-using-Constructor-Object" class="headerlink" title="Instantiating Objects using Constructor Object"></a>Instantiating Objects using Constructor Object</h2><p>使用Constructor初始化对象:<br><figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//get constructor that takes a String as argument</span></div><div class="line"><span class="function"><span class="keyword">Constructor</span> <span class="title">constructor</span> = <span class="title">MyObject</span>.<span class="title">class</span>.<span class="title">getConstructor</span><span class="params">(<span class="keyword">String</span>.<span class="keyword">class</span>)</span>;</span></div><div class="line"></div><div class="line">MyObject myObject = (MyObject) <span class="function"><span class="keyword">constructor</span>.<span class="title">newInstance</span><span class="params">("<span class="keyword">constructor</span>-arg1")</span>;</span></div></pre></td></tr></table></figure></p>
<p>Constructor.newInstance()方法根据指定的参数创建对象。</p>
<h1 id="Fields-1"><a href="#Fields-1" class="headerlink" title="Fields"></a>Fields</h1><p>使用Java反射你可以在运行时得到类的成员变量并进行get/set。</p>
<h2 id="Obtaining-Field-Objects"><a href="#Obtaining-Field-Objects" class="headerlink" title="Obtaining Field Objects"></a>Obtaining Field Objects</h2><figure class="highlight monkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">Class</span> <span class="title">aClass</span> = ...//<span class="title">obtain</span> <span class="title">class</span> <span class="title">object</span></span></div><div class="line"><span class="keyword">Field</span>[] fields = aClass.getFields();</div></pre></td></tr></table></figure>
<p>返回的Field[]数组包含类中所有的public成员变量。</p>
<p>如果知道成员变量的名字，则可以使用getField()和getDeclaredField()方法获得成员变量对象。<br><figure class="highlight monkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">Class</span> <span class="title">aClass</span> = <span class="title">MyObject</span>.<span class="title">class</span></span></div><div class="line"><span class="keyword">Field</span> <span class="keyword">field</span> = aClass.getField(<span class="string">"someField"</span>);</div><div class="line"><span class="keyword">Field</span> otherField = aClass.getDeclaredField(<span class="string">"someField"</span>)</div></pre></td></tr></table></figure></p>
<p>如果没有指定名字的成员变量会抛出NoSuchFieldException异常。<br>getField(String name)与getDeclaredField(String name)的区别是getField只能返回public的成员变量，而getDeclaredField还可以返回private修饰的成员变量。</p>
<h2 id="Field-Name"><a href="#Field-Name" class="headerlink" title="Field Name"></a>Field Name</h2><p>使用Field对象获得成员变量名字的方法如下：<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">Field</span> <span class="meta">field</span> = ...//obtain <span class="meta">field</span> object</div><div class="line"><span class="keyword">String </span>fieldName = <span class="meta">field</span>.getName()<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<h2 id="Field-Type"><a href="#Field-Type" class="headerlink" title="Field Type"></a>Field Type</h2><p>得到成员变量类型的方法如下：<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">Field field</span> = aClass.getField(<span class="string">"someField"</span>);</div><div class="line"><span class="attribute">Object fieldType</span> = field.getType();</div></pre></td></tr></table></figure></p>
<h2 id="Getting-and-Setting-Field-Values"><a href="#Getting-and-Setting-Field-Values" class="headerlink" title="Getting and Setting Field Values"></a>Getting and Setting Field Values</h2><p>当我们得到Field对象时，就可以使用Field.get()和Field.set()方法来获得和设置成员变量的值。<br><figure class="highlight monkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">Class</span> <span class="title">aClass</span> = <span class="title">MyObject</span>.<span class="title">class</span></span></div><div class="line"><span class="keyword">Field</span> <span class="keyword">field</span> = aClass.getField(<span class="string">"someField"</span>);</div><div class="line"></div><div class="line">MyObject objectInstance = <span class="keyword">new</span> MyObject();</div><div class="line">Object value = <span class="keyword">field</span>.get(objectInstance);</div><div class="line"><span class="keyword">field</span>.set(objectInstance,value);</div></pre></td></tr></table></figure></p>
<p>如果是一个static的成员，则Field的get和set方法传null作为参数。</p>
<h1 id="Methods-1"><a href="#Methods-1" class="headerlink" title="Methods"></a>Methods</h1><h2 id="Obtaining-Method-Objects"><a href="#Obtaining-Method-Objects" class="headerlink" title="Obtaining Method Objects"></a>Obtaining Method Objects</h2><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Class</span> aClass = ...<span class="comment">//obtain class object</span></div><div class="line"><span class="function"><span class="keyword">Method</span>[] <span class="title">methods</span> = <span class="title">aClass</span>.<span class="title">getMethods</span><span class="params">()</span>;</span></div></pre></td></tr></table></figure>
<p>返回类中定义的public方法列表。<br>如果知道方法的名字和参数列表，则可以使用getMethod()直接得到Method对象。<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Class</span>  aClass = ...<span class="comment">//obtain class object</span></div><div class="line"><span class="function"><span class="keyword">Method</span> <span class="title">method</span> =</span></div><div class="line"><span class="function">    <span class="title">aClass</span>.<span class="title">getMethod</span><span class="params">("doSomething", <span class="keyword">new</span> <span class="keyword">Class</span>[]&#123;String.<span class="keyword">class</span>&#125;)</span>;</span></div></pre></td></tr></table></figure></p>
<p>如果没有找到则会抛出NoSuchMethodException异常。<br>如果方法没有参数，则传递null<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Class</span>  aClass = ...<span class="comment">//obtain class object</span></div><div class="line"><span class="function"><span class="keyword">Method</span> <span class="title">method</span> =</span></div><div class="line"><span class="function">    <span class="title">aClass</span>.<span class="title">getMethod</span><span class="params">("doSomething", null)</span>;</span></div></pre></td></tr></table></figure></p>
<h2 id="Method-Parameters-and-Return-Types"><a href="#Method-Parameters-and-Return-Types" class="headerlink" title="Method Parameters and Return Types"></a>Method Parameters and Return Types</h2><p>通过Method对象获得方法的参数列表<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">Method</span> <span class="title">method</span> = ... // <span class="title">obtain</span> <span class="title">method</span> - <span class="title">see</span> <span class="title">above</span></span></div><div class="line"><span class="function"><span class="title">Class</span>[] <span class="title">parameterTypes</span> = <span class="title">method</span>.<span class="title">getParameterTypes</span><span class="params">()</span>;</span></div></pre></td></tr></table></figure></p>
<p>得到返回类型：<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">Method</span> <span class="title">method</span> = ... // <span class="title">obtain</span> <span class="title">method</span> - <span class="title">see</span> <span class="title">above</span></span></div><div class="line"><span class="function"><span class="title">Class</span> <span class="title">returnType</span> = <span class="title">method</span>.<span class="title">getReturnType</span><span class="params">()</span>;</span></div></pre></td></tr></table></figure></p>
<h2 id="Invoking-Methods-using-Method-Object"><a href="#Invoking-Methods-using-Method-Object" class="headerlink" title="Invoking Methods using Method Object"></a>Invoking Methods using Method Object</h2><p>使用Method对象调用类想对应的方法。<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//get method that takes a String as argument</span></div><div class="line"><span class="function"><span class="keyword">Method</span> <span class="title">method</span> = <span class="title">MyObject</span>.<span class="title">class</span>.<span class="title">getMethod</span><span class="params">("doSomething", String.<span class="keyword">class</span>)</span>;</span></div><div class="line">MyObject instance = <span class="keyword">new</span> MyObject();</div><div class="line">Object returnType = <span class="function"><span class="keyword">method</span>.<span class="title">invoke</span><span class="params">(instance,"parameter-value1")</span></span></div></pre></td></tr></table></figure></p>
<p>method.invoke的第一个参数为需要在哪个实例上调用的method方法的对象，弱如果是static修饰的方法则此参数传递null即可。</p>
<h1 id="Getters-and-Setters"><a href="#Getters-and-Setters" class="headerlink" title="Getters and Setters"></a>Getters and Setters</h1><p>Java反射无法直接得到类的Getter和Setter方法，但可以通过遍历Method[]数组，根据Getter和Setter方法的特征得到。具体特征约定如下：</p>
<ul>
<li><p><strong>Getter</strong><br>0参数，并且方法名以get开头。</p>
</li>
<li><p><strong>Setter</strong><br>1个参数，并且方法名以set开头。</p>
</li>
</ul>
<p>下面是实现举例：<br><figure class="highlight monkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> static void printGettersSetters(<span class="class"><span class="keyword">Class</span> <span class="title">aClass</span>)&#123;</span></div><div class="line">	<span class="function"><span class="keyword">Method</span>[] <span class="title">methods</span> =</span> aClass.getMethods();</div><div class="line">	<span class="keyword">for</span>(<span class="function"><span class="keyword">Method</span> <span class="title">method</span>:</span> methods)&#123;</div><div class="line">		<span class="keyword">if</span>(isGetter(<span class="function"><span class="keyword">method</span>)) <span class="title">System</span>.<span class="title">out</span>.<span class="title">println</span>(</span><span class="string">"getter: "</span>+<span class="function"><span class="keyword">method</span>);</span></div><div class="line">		<span class="keyword">if</span>(isSetter(<span class="function"><span class="keyword">method</span>)) <span class="title">System</span>.<span class="title">out</span>.<span class="title">println</span>(</span><span class="string">"setter: "</span>+<span class="function"><span class="keyword">method</span>);</span></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> static boolean isGetter(<span class="function"><span class="keyword">Method</span> <span class="title">method</span>)&#123;</span></div><div class="line">	<span class="keyword">if</span>(!<span class="function"><span class="keyword">method</span>.<span class="title">getName</span>.<span class="title">startsWith</span>(</span><span class="string">"get"</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	<span class="keyword">if</span>(<span class="function"><span class="keyword">method</span>.<span class="title">getParameterTypes</span>(</span>).length !=<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	<span class="keyword">if</span>(void.class.equals(<span class="function"><span class="keyword">method</span>.<span class="title">getReturnType</span>(</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> static boolean isSetter(<span class="function"><span class="keyword">Method</span> <span class="title">method</span>)&#123;</span></div><div class="line">	<span class="keyword">if</span>(!<span class="function"><span class="keyword">method</span>.<span class="title">getName</span>(</span>).startsWith(<span class="string">"set"</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	<span class="keyword">if</span>(<span class="function"><span class="keyword">method</span>.<span class="title">getParameterTypes</span>(</span>).length != <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="Private-Fields-and-Methods"><a href="#Private-Fields-and-Methods" class="headerlink" title="Private Fields and Methods"></a>Private Fields and Methods</h1><h2 id="Accessing-Private-Fields"><a href="#Accessing-Private-Fields" class="headerlink" title="Accessing Private Fields"></a>Accessing Private Fields</h2><p>访问private field需要使用Class.getDeclaredField(String name)或者Class.getDeclaredFields()方法。Class.getField(String name)和Class.getFields()方法只会返回公有域public field。<br>例如：<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PrivateObject</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">String</span> privateString = <span class="literal">null</span>;</div><div class="line">	<span class="keyword">public</span> PrivateObject(<span class="keyword">String</span> privateString)&#123;</div><div class="line">		<span class="built_in">this</span>.privateString = privateString;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">PrivateObject privateObject = <span class="keyword">new</span> PrivateObject(<span class="string">"The Private Value"</span>);</div><div class="line"></div><div class="line">Field privateStringField = PrivateObject.<span class="keyword">class</span>.getDeclaredField(<span class="string">"privateString"</span>);</div><div class="line"></div><div class="line">privateStringField.setAccessible(<span class="keyword">true</span>);</div><div class="line"></div><div class="line"><span class="built_in">String</span> fieldValue = (<span class="built_in">String</span>) privateStringField.<span class="keyword">get</span>(privateObject);</div><div class="line">System.out.println(<span class="string">"fieldValue = "</span> + fieldValue); <span class="comment">//will print "The Private Value"</span></div></pre></td></tr></table></figure>
<h2 id="Accessing-Private-Methods"><a href="#Accessing-Private-Methods" class="headerlink" title="Accessing Private Methods"></a>Accessing Private Methods</h2><p>访问private method使用Class.getDeclaredMethod(String name, Class[] parameterTypes) 或者Class.getDeclaredMethods()<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PrivateObject</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="keyword">private</span> <span class="keyword">String</span> privateString = <span class="literal">null</span>;</div><div class="line"></div><div class="line">  <span class="keyword">public</span> PrivateObject(<span class="keyword">String</span> privateString) &#123;</div><div class="line">    <span class="built_in">this</span>.privateString = privateString;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">private</span> <span class="keyword">String</span> getPrivateString()&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.privateString;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">PrivateObject privateObject = <span class="keyword">new</span> PrivateObject(<span class="string">"The Private Value"</span>);</div><div class="line"></div><div class="line">Method privateStringMethod = PrivateObject.<span class="keyword">class</span>.</div><div class="line">        getDeclaredMethod(<span class="string">"getPrivateString"</span>, <span class="keyword">null</span>);</div><div class="line"></div><div class="line">privateStringMethod.setAccessible(<span class="keyword">true</span>);</div><div class="line"></div><div class="line"><span class="built_in">String</span> returnValue = (<span class="built_in">String</span>)</div><div class="line">        privateStringMethod.invoke(privateObject, <span class="keyword">null</span>);</div><div class="line"></div><div class="line">System.out.println(<span class="string">"returnValue = "</span> + returnValue); <span class="comment">//will print "The Private Value"</span></div></pre></td></tr></table></figure>
<h1 id="Annotations-1"><a href="#Annotations-1" class="headerlink" title="Annotations"></a>Annotations</h1><h2 id="What-are-Java-Annotations"><a href="#What-are-Java-Annotations" class="headerlink" title="What are Java Annotations?"></a>What are Java Annotations?</h2><p>Annotation是一种在Java代码中插入的注释或元数据，这些注释可以在编译时通过预编译工具进行处理，也可以在运行时通过反射进行处理。<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@MyAnnotation(name=<span class="meta-string">"someName"</span>, value =<span class="meta-string">"Hello World"</span>)</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TheClass</span></span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>TheClass类具有@MyAnnotation的注释，注释像接口一样定义。<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="variable">@Retention</span>(RetentionPolicy.RUNTIME)</div><div class="line"><span class="variable">@Target</span>(ElementType.TYPE)</div><div class="line"></div><div class="line">public <span class="variable">@interface</span> MyAnnotation&#123;</div><div class="line">	<span class="selector-tag">public</span> <span class="selector-tag">String</span> <span class="selector-tag">name</span>();</div><div class="line">	<span class="selector-tag">public</span> <span class="selector-tag">String</span> <span class="selector-tag">value</span>();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>interface前的@表明是定义Annotation<br>@Retention(RetentionPolicy.RUNTIME)表示注释在运行时可以通过反射来访问，如果没有指定，则注释在运行时不会保留。<br>@Target(ElementType.TYPE)表示注释只能用于类型（类和接口）的顶部，也可以指定用于方法和成员变量。</p>
<h3 id="Java-Annotations-Purposes"><a href="#Java-Annotations-Purposes" class="headerlink" title="Java Annotations Purposes"></a>Java Annotations Purposes</h3><p>Java注解用于以下目的:</p>
<ul>
<li>Compiler instructions</li>
<li>Build-time instructions</li>
<li>Runtime instructions</li>
</ul>
<h3 id="Annotation-Basics"><a href="#Annotation-Basics" class="headerlink" title="Annotation Basics"></a>Annotation Basics</h3><p>一个简单的注解如下所示：<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Entity</span></div></pre></td></tr></table></figure></p>
<p>@告诉编译器这是一个注解，@之后为注解的名字，这里为Entity</p>
<h4 id="Annotation-Elements"><a href="#Annotation-Elements" class="headerlink" title="Annotation Elements"></a>Annotation Elements</h4><p>注解可以包含可以为其设置值的元素，元素就像一个属性或参数。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">Entity</span>(<span class="keyword">tableName</span> = <span class="string">"vehicles"</span>)</div></pre></td></tr></table></figure></p>
<p>在上面的例子中包含了一个名为tableName的元素，并且设置其值为vehicles。元素需要被括号包在其中，如果注解没有元素，则不需要后面的括号。</p>
<p>一个注解可以包含多个元素<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">Entity</span>(<span class="keyword">tableName</span>="<span class="keyword">vehicles</span>", primaryKey=<span class="string">"id"</span>)</div></pre></td></tr></table></figure></p>
<p>如果一个注解只包含一个元素，则可以将其命名为value<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">InsertNew</span>(<span class="keyword">value</span>="<span class="keyword">yes</span>")</div></pre></td></tr></table></figure></p>
<p>如果一个注解只包含一个名为value的元素，则可以省略名字<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@InsertNew(<span class="meta-string">"yes"</span>)</span></div></pre></td></tr></table></figure></p>
<h3 id="Annotation-Placement"><a href="#Annotation-Placement" class="headerlink" title="Annotation Placement"></a>Annotation Placement</h3><p>注解可以放在classes、interfaces、methods、methods parameters、fields and local variables。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span>&#123;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>表示在类上的一个名为Entity的注解。<br>下面为在class fields methods parameters and local variables上的注解<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// class</span></div><div class="line"><span class="meta">@Entity</span> </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span> </span>&#123;</div><div class="line">	<span class="comment">// field</span></div><div class="line">    <span class="meta">@Persistent</span> </div><div class="line">    <span class="keyword">protected</span> String vehicleName = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">	<span class="comment">//method</span></div><div class="line">    <span class="meta">@Getter</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getVehicleName</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.vehicleName;</div><div class="line">    &#125;</div><div class="line">	<span class="comment">//method parameter</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setVehicleName</span><span class="params">(@Optional vehicleName)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.vehicleName = vehicleName;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> List <span class="title">addVehicleNameToList</span><span class="params">(List names)</span> </span>&#123;</div><div class="line">	<span class="comment">// local variable</span></div><div class="line">        <span class="meta">@Optional</span></div><div class="line">        List localNames = names;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(localNames == <span class="keyword">null</span>) &#123;</div><div class="line">            localNames = <span class="keyword">new</span> ArrayList();</div><div class="line">        &#125;</div><div class="line">        localNames.add(getVehicleName());</div><div class="line"></div><div class="line">        <span class="keyword">return</span> localNames;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Built-in-Java-Annotations"><a href="#Built-in-Java-Annotations" class="headerlink" title="Built-in Java Annotations"></a>Built-in Java Annotations</h3><p>Java有三类compiler instructions的注解，分别是：</p>
<ul>
<li>@Deprecated</li>
<li>@Override</li>
<li>@SupressWarnings</li>
</ul>
<h4 id="Deprecated"><a href="#Deprecated" class="headerlink" title="@Deprecated"></a>@Deprecated</h4><p>@Deprecated注解用来表明class method 或者field 被弃用，不应该再被使用，如果代码中使用这些被弃用的类、方法、或域则编译器会给出warning。<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Deprecated</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span>&#123;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在使用@Deprecated注解的时候，最好和Java注释一起使用，说明被弃用的原因，以及替代的新类、方法或域。<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Deprecated</span></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment">  <span class="doctag">@deprecated</span> Use MyNewComponent instead.</span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> &#123;</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="Override"><a href="#Override" class="headerlink" title="@Override"></a>@Override</h4><p>@Override在方法上使用，用来表示对父类同名方法的重写覆盖。如果方法与父类中找不到同名方法，使用@Override编译器会给出错误。</p>
<p>在覆盖父类的方法时，@Override注解不是必须的，但建议加上，防止父类修改同名方法，子类未加@Override注解发现不了。<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MySuperClass</span> </span>&#123;</div><div class="line"></div><div class="line">    public void doTheThing() &#123;</div><div class="line">        <span class="type">System</span>.out.println(<span class="string">"Do the thing"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MySubClass</span> <span class="keyword">extends</span> <span class="title">MySuperClass</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    public void doTheThing() &#123;</div><div class="line">        <span class="type">System</span>.out.println(<span class="string">"Do it differently"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="SuppressWarnings"><a href="#SuppressWarnings" class="headerlink" title="@SuppressWarnings"></a>@SuppressWarnings</h4><p>@SuppressWarnings可以略过编译器的警告。<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@SuppressWarnings</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">methodWithWarning</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Creating-Your-Own-Annotations"><a href="#Creating-Your-Own-Annotations" class="headerlink" title="Creating Your Own Annotations"></a>Creating Your Own Annotations</h3><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">interface</span> <span class="title">MyAnnotation</span> &#123;</div><div class="line"></div><div class="line">    <span class="function">String   <span class="title">value</span>(<span class="params"></span>)</span>;</div><div class="line"></div><div class="line">    <span class="function">String   <span class="title">name</span>(<span class="params"></span>)</span>;</div><div class="line">    <span class="function"><span class="keyword">int</span>      <span class="title">age</span>(<span class="params"></span>)</span>;</div><div class="line">    <span class="function">String[] <span class="title">newNames</span>(<span class="params"></span>)</span>;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面定义了一个包含四个元素的注解，关键字@interface向编译器表明这是注解的定义。<br>注解中的元素由数据类型和名字组成，类似interface接口中的抽象方法。但数据类型只能是基本数据类型或者是基本数据类型的数组，而不能是复杂对象。</p>
<p>使用上面注解的例子如下：<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">@MyAnnotation(</div><div class="line">    value=<span class="string">"123"</span>,</div><div class="line">    name=<span class="string">"Jakob"</span>,</div><div class="line">    age=<span class="number">37</span>,</div><div class="line">    <span class="keyword">new</span><span class="type">Names</span>=&#123;<span class="string">"Jenkov"</span>, <span class="string">"Peterson"</span>&#125;</div><div class="line">)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="Element-Default-Values"><a href="#Element-Default-Values" class="headerlink" title="Element Default Values"></a>Element Default Values</h4><p>定义注解时，可以为其中的元素指定默认值，这样在添加注解时可以省略具有默认值的元素。<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@<span class="class"><span class="keyword">interface</span> <span class="title">MyAnnotation</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">String</span>   value() <span class="keyword">default</span> <span class="string">""</span>;</div><div class="line"></div><div class="line">    <span class="keyword">String</span>   name();</div><div class="line">    int      age();</div><div class="line">    <span class="keyword">String</span>[] <span class="keyword">new</span><span class="type">Names</span>();</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>value元素指定了默认值，所以可以不用给它赋值。<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@MyAnnotation(</div><div class="line">    name=<span class="string">"Jakob"</span>,</div><div class="line">    age=<span class="number">37</span>,</div><div class="line">    <span class="keyword">new</span><span class="type">Names</span>=&#123;<span class="string">"Jenkov"</span>, <span class="string">"Peterson"</span>&#125;</div><div class="line">)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="Retention"><a href="#Retention" class="headerlink" title="@Retention"></a>@Retention</h4><p>定义该注解的生命周期，表示在什么级别保留此信息。</p>
<ul>
<li><p>RetentionPolicy.SOURCE – 在编译阶段丢弃。这些注解在编译结束之后就不再有任何意义，所以它们不会写入字节码。@Override, @SuppressWarnings都属于这类注解。</p>
</li>
<li><p>RetentionPolicy.CLASS – 在类加载的时候丢弃。在字节码文件的处理中有用。注解默认使用这种方式。（默认值）</p>
</li>
<li><p>RetentionPolicy.RUNTIME– 始终不会丢弃，运行期也保留该注解，因此可以使用反射机制读取该注解的信息。我们自定义的注解通常使用这种方式。</p>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">import</span> <span class="selector-tag">java</span><span class="selector-class">.lang</span><span class="selector-class">.annotation</span><span class="selector-class">.Retention</span>;</div><div class="line"><span class="selector-tag">import</span> <span class="selector-tag">java</span><span class="selector-class">.lang</span><span class="selector-class">.annotation</span><span class="selector-class">.RetentionPolicy</span>;</div><div class="line"></div><div class="line">@<span class="keyword">Retention</span>(<span class="keyword">RetentionPolicy</span>.<span class="keyword">RUNTIME</span>)</div><div class="line"></div><div class="line">@<span class="keyword">interface</span> MyAnnotation &#123;</div><div class="line"></div><div class="line">    <span class="selector-tag">String</span>   <span class="selector-tag">value</span>() <span class="selector-tag">default</span> "";</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Target"><a href="#Target" class="headerlink" title="@Target"></a>@Target</h4><p> 表示该注解用于什么地方。如果不明确指出，该注解可以放在任何地方。</p>
<ul>
<li>ElementType.TYPE:用于描述类、接口或enum声明 注解</li>
<li>ElementType.FIELD:用于描述实例变量</li>
<li>ElementType.METHOD:方法声明</li>
<li>ElementType.PARAMETER:参数声明</li>
<li>ElementType.CONSTRUCTOR:构造器的声明</li>
<li>ElementType.LOCAL_VARIABLE:局部变量声明</li>
<li>ElementType.ANNOTATION_TYPE 另一个注释(ANNOTATION_TYPE目标意味着注释只能用于注释其他注释。像@Target和@Retention注释一样。)</li>
<li>ElementType.PACKAGE 用于记录java文件的package信息。</li>
</ul>
<hr>
<pre><code>import java.lang.annotation.ElementType;
import java.lang.annotation.Target;

@Target({ElementType.METHOD})
public @interface MyAnnotation {

      String value();
}
</code></pre><h4 id="Inherited"><a href="#Inherited" class="headerlink" title="@Inherited"></a>@Inherited</h4><p>允许子类继承父类中的注解</p>
<pre><code>java.lang.annotation.Inherited

@Inherited
public @interface MyAnnotation{

}
</code></pre><hr>
<pre><code>@MyAnnotation
public class MySuperClass {...}
</code></pre><hr>
<pre><code>public class MySubClass extends MySuperClass {...}
</code></pre><p> MySubClass可以继承MySuperClass的注解，因为声明了@Inherited</p>
<h4 id="Documented"><a href="#Documented" class="headerlink" title="@Documented"></a>@Documented</h4><p>一个简单的Annotations标记注解，表示是否将注解信息添加在java文档中。<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta"><span class="meta-keyword">import</span> java.lang.annotation.Documented;</span></div><div class="line"></div><div class="line">@Documented</div><div class="line"><span class="keyword">public</span> @<span class="class"><span class="keyword">interface</span> <span class="title">MyAnnotation</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@MyAnnotation</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MySuperClass</span> &#123;</span> ... &#125;</div></pre></td></tr></table></figure>
<p>当为MySuperClass类生成JavaDoc时， @MyAnnotation注解将会被包含进JavaDoc。</p>
<p><strong><em> Java注解的例子和注解处理器等内容将在新的文章中讲解 (待补充)</em></strong></p>
<h2 id="Class-Annotations"><a href="#Class-Annotations" class="headerlink" title="Class Annotations"></a>Class Annotations</h2><p> 使用反射可以在运行时得到类、方法、域变量的注解。</p>
<p> 类：<br><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Class aClass = TheClass.<span class="keyword">class</span>;</div><div class="line">Annotation[] annotations = aClass.getAnnotations();</div><div class="line"></div><div class="line"><span class="keyword">for</span>(Annotation <span class="keyword">annotation</span> : annotations)&#123;</div><div class="line">    <span class="keyword">if</span>(<span class="keyword">annotation</span> instanceof MyAnnotation)&#123;</div><div class="line">        MyAnnotation myAnnotation = (MyAnnotation) <span class="keyword">annotation</span>;</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">"name: "</span> + myAnnotation.name());</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">"value: "</span> + myAnnotation.<span class="keyword">value</span>());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>已知注解的名字还可以直接得到注解。<br><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Class aClass = TheClass.<span class="keyword">class</span>;</div><div class="line">Annotation <span class="keyword">annotation</span> = aClass.getAnnotation(MyAnnotation.<span class="keyword">class</span>);</div><div class="line"></div><div class="line"><span class="keyword">if</span>(<span class="keyword">annotation</span> instanceof MyAnnotation)&#123;</div><div class="line">    MyAnnotation myAnnotation = (MyAnnotation) <span class="keyword">annotation</span>;</div><div class="line">    System.<span class="keyword">out</span>.println(<span class="string">"name: "</span> + myAnnotation.name());</div><div class="line">    System.<span class="keyword">out</span>.println(<span class="string">"value: "</span> + myAnnotation.<span class="keyword">value</span>());</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Method-Annotations"><a href="#Method-Annotations" class="headerlink" title="Method Annotations"></a>Method Annotations</h2><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TheClass</span> &#123;</div><div class="line">  @MyAnnotation(name=<span class="string">"someName"</span>,  <span class="keyword">value</span> = <span class="string">"Hello World"</span>)</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">Method</span> <span class="title">method</span> = ... //<span class="title">obtain</span> <span class="title">method</span> <span class="title">object</span></span></div><div class="line"><span class="function"><span class="title">Annotation</span>[] <span class="title">annotations</span> = <span class="title">method</span>.<span class="title">getDeclaredAnnotations</span><span class="params">()</span>;</span></div><div class="line"></div><div class="line"><span class="keyword">for</span>(Annotation annotation : annotations)<span class="comment">&#123;</span></div><div class="line"><span class="comment">    if(annotation instanceof MyAnnotation)&#123;</span></div><div class="line"><span class="comment">        MyAnnotation myAnnotation = (MyAnnotation) annotation;</span></div><div class="line"><span class="comment">        System.out.println("name: " + myAnnotation.name());</span></div><div class="line"><span class="comment">        System.out.println("value: " + myAnnotation.value());</span></div><div class="line"><span class="comment">    &#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>已知注解的名字：<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">Method</span> <span class="title">method</span> = ... // <span class="title">obtain</span> <span class="title">method</span> <span class="title">object</span></span></div><div class="line"><span class="function"><span class="title">Annotation</span> <span class="title">annotation</span> = <span class="title">method</span>.<span class="title">getAnnotation</span><span class="params">(MyAnnotation.<span class="keyword">class</span>)</span>;</span></div><div class="line"></div><div class="line"><span class="keyword">if</span>(annotation instanceof MyAnnotation)<span class="comment">&#123;</span></div><div class="line"><span class="comment">    MyAnnotation myAnnotation = (MyAnnotation) annotation;</span></div><div class="line"><span class="comment">    System.out.println("name: " + myAnnotation.name());</span></div><div class="line"><span class="comment">    System.out.println("value: " + myAnnotation.value());</span></div><div class="line"><span class="comment">&#125;</span></div></pre></td></tr></table></figure></p>
<h2 id="Parameter-Annotations"><a href="#Parameter-Annotations" class="headerlink" title="Parameter Annotations"></a>Parameter Annotations</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">public</span> <span class="selector-tag">class</span> <span class="selector-tag">TheClass</span> &#123;</div><div class="line">  <span class="selector-tag">public</span> <span class="selector-tag">static</span> <span class="selector-tag">void</span> <span class="selector-tag">doSomethingElse</span>(</div><div class="line">        <span class="variable">@MyAnnotation</span>(name=<span class="string">"aName"</span>, value=<span class="string">"aValue"</span>) String parameter)&#123;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">Method</span> <span class="title">method</span> = ... //<span class="title">obtain</span> <span class="title">method</span> <span class="title">object</span></span></div><div class="line"><span class="function"><span class="title">Annotation</span>[][] <span class="title">parameterAnnotations</span> = <span class="title">method</span>.<span class="title">getParameterAnnotations</span><span class="params">()</span>;</span></div><div class="line"><span class="keyword">Class</span>[] parameterTypes = <span class="function"><span class="keyword">method</span>.<span class="title">getParameterTypes</span><span class="params">()</span>;</span></div><div class="line"></div><div class="line">int i=<span class="number">0</span>;</div><div class="line"><span class="keyword">for</span>(Annotation[] annotations : parameterAnnotations)<span class="comment">&#123;</span></div><div class="line"><span class="comment">  Class parameterType = parameterTypes[i++];</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">  for(Annotation annotation : annotations)&#123;</span></div><div class="line"><span class="comment">    if(annotation instanceof MyAnnotation)&#123;</span></div><div class="line"><span class="comment">        MyAnnotation myAnnotation = (MyAnnotation) annotation;</span></div><div class="line"><span class="comment">        System.out.println("param: " + parameterType.getName());</span></div><div class="line"><span class="comment">        System.out.println("name : " + myAnnotation.name());</span></div><div class="line"><span class="comment">        System.out.println("value: " + myAnnotation.value());</span></div><div class="line"><span class="comment">    &#125;</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Method.getParameterAnnotations()返回一个二维Annotation数组，每个参数对应一个注解数组，所以返回二维Annotation数组。</p>
<h2 id="Field-Annotations"><a href="#Field-Annotations" class="headerlink" title="Field Annotations"></a>Field Annotations</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TheClass</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="meta">@MyAnnotation(name=<span class="meta-string">"someName"</span>,  value = <span class="meta-string">"Hello World"</span>)</span></div><div class="line">  <span class="keyword">public</span> String myField = <span class="literal">null</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight ceylon"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Field field = ... <span class="comment">//obtain field object</span></div><div class="line">Annotation[] annotations = field.getDeclaredAnnotations();</div><div class="line"></div><div class="line"><span class="keyword">for</span>(Annotation <span class="keyword">annotation</span> : annotations)&#123;</div><div class="line">    <span class="keyword">if</span>(<span class="keyword">annotation</span> instanceof MyAnnotation)&#123;</div><div class="line">        MyAnnotation myAnnotation = (MyAnnotation) <span class="keyword">annotation</span>;</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">"name: "</span> + myAnnotation.name());</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">"value: "</span> + myAnnotation.<span class="keyword">value</span>());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>已知注解的名字：</p>
<figure class="highlight ceylon"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Field field = ... <span class="comment">// obtain method object</span></div><div class="line">Annotation <span class="keyword">annotation</span> = field.getAnnotation(MyAnnotation.<span class="keyword">class</span>);</div><div class="line"></div><div class="line"><span class="keyword">if</span>(<span class="keyword">annotation</span> instanceof MyAnnotation)&#123;</div><div class="line">    MyAnnotation myAnnotation = (MyAnnotation) <span class="keyword">annotation</span>;</div><div class="line">    System.<span class="keyword">out</span>.println(<span class="string">"name: "</span> + myAnnotation.name());</div><div class="line">    System.<span class="keyword">out</span>.println(<span class="string">"value: "</span> + myAnnotation.<span class="keyword">value</span>());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>例子：</p>
<p>注解的定义：</p>
<p><img src="/blog/images/MyAnnotation.png" alt="Myannotation"></p>
<p>测试类：</p>
<figure class="highlight ceylon"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.iaihe.Annotations;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.lang.<span class="keyword">annotation</span>.Annotation;</div><div class="line"><span class="keyword">import</span> java.lang.reflect.Field;</div><div class="line"><span class="keyword">import</span> java.lang.reflect.Method;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Created by zlshi on 17-11-23.</span></div><div class="line"><span class="comment"> */</span></div><div class="line">@MyAnnotation(name = <span class="string">"class"</span>,<span class="keyword">value</span>=<span class="string">"class annotation test"</span>)</div><div class="line">public <span class="keyword">class</span> TheClass &#123;</div><div class="line">    @MyAnnotation(name=<span class="string">"field"</span>,<span class="keyword">value</span>=<span class="string">"field annotation test"</span>)</div><div class="line">    public String myField = null;</div><div class="line">    @MyAnnotation(name=<span class="string">"method"</span>,<span class="keyword">value</span>=<span class="string">"method annotation test"</span>)</div><div class="line">    public <span class="keyword">void</span> doSomething()&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    public static <span class="keyword">void</span> doSomethingElse(</div><div class="line">            @MyAnnotation(name=<span class="string">"parameter"</span>,<span class="keyword">value</span>=<span class="string">"parameter annotation test"</span>) String parameter)&#123;</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">"somethinElse: "</span>+parameter);</div><div class="line">    &#125;</div><div class="line">    public static <span class="keyword">void</span> main(String[] args) <span class="meta">throws</span> Exception&#123;</div><div class="line">        Class aClass = TheClass.<span class="keyword">class</span>;</div><div class="line">        <span class="comment">//Class Annotations</span></div><div class="line">        Annotation[] annotationss = aClass.getAnnotations();</div><div class="line">        <span class="keyword">for</span>(Annotation <span class="keyword">annotation</span> : annotationss)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">if</span>(<span class="keyword">annotation</span> instanceof  MyAnnotation)&#123;</div><div class="line">                MyAnnotation myAnnotation = (MyAnnotation)<span class="keyword">annotation</span>;</div><div class="line">                System.<span class="keyword">out</span>.println(<span class="string">"name: "</span>+myAnnotation.name());</div><div class="line">                System.<span class="keyword">out</span>.println(<span class="string">"value: "</span>+myAnnotation.<span class="keyword">value</span>());</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">"=============================="</span>);</div><div class="line">        <span class="comment">//Class Annotations</span></div><div class="line">        Annotation <span class="keyword">annotation</span> = aClass.getAnnotation(MyAnnotation.<span class="keyword">class</span>);</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">annotation</span> instanceof  MyAnnotation)</div><div class="line">        &#123;</div><div class="line">            MyAnnotation myAnnotation = (MyAnnotation)<span class="keyword">annotation</span>;</div><div class="line">            System.<span class="keyword">out</span>.println(<span class="string">"name: "</span>+myAnnotation.name());</div><div class="line">            System.<span class="keyword">out</span>.println(<span class="string">"value: "</span>+myAnnotation.<span class="keyword">value</span>());</div><div class="line">        &#125;</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">"=============================="</span>);</div><div class="line">        <span class="comment">//Method Annotations</span></div><div class="line">        Method method = aClass.getDeclaredMethod(<span class="string">"doSomething"</span>);</div><div class="line">        Annotation <span class="keyword">annotation</span><span class="number">1</span> = method.getAnnotation(MyAnnotation.<span class="keyword">class</span>);</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">annotation</span><span class="number">1</span> instanceof MyAnnotation)</div><div class="line">        &#123;</div><div class="line">            MyAnnotation myAnnotation = (MyAnnotation)<span class="keyword">annotation</span><span class="number">1</span>;</div><div class="line">            System.<span class="keyword">out</span>.println(<span class="string">"name: "</span>+myAnnotation.name());</div><div class="line">            System.<span class="keyword">out</span>.println(<span class="string">"value: "</span>+myAnnotation.<span class="keyword">value</span>());</div><div class="line">        &#125;</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">"=============================="</span>);</div><div class="line">        <span class="comment">//Parameter Annotations</span></div><div class="line">        Method method<span class="number">1</span> = aClass.getDeclaredMethod(<span class="string">"doSomethingElse"</span>, String.<span class="keyword">class</span>);</div><div class="line">        Annotation[][] parameterAnnotations = method<span class="number">1</span>.getParameterAnnotations();</div><div class="line">        Class[] parameterTypes = method<span class="number">1</span>.getParameterTypes();</div><div class="line">        int i = <span class="number">0</span>;</div><div class="line">        method<span class="number">1</span>.invoke(null,<span class="string">"Test somethingElse method"</span>);</div><div class="line">        <span class="keyword">for</span>(Annotation[] annotations:parameterAnnotations)</div><div class="line">        &#123;</div><div class="line">            Class parameterType = parameterTypes[i++];</div><div class="line">            <span class="keyword">for</span>(Annotation anno:annotations)</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">if</span>(anno instanceof MyAnnotation)</div><div class="line">                &#123;</div><div class="line">                    MyAnnotation myAnnotation = (MyAnnotation)anno;</div><div class="line">                    System.<span class="keyword">out</span>.println(<span class="string">"param: "</span>+parameterType.getName());</div><div class="line">                    System.<span class="keyword">out</span>.println(<span class="string">"name: "</span>+myAnnotation.name());</div><div class="line">                    System.<span class="keyword">out</span>.println(<span class="string">"value: "</span>+myAnnotation.<span class="keyword">value</span>());</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">"=============================="</span>);</div><div class="line">        <span class="comment">//Field Annotations</span></div><div class="line">        Field field = aClass.getDeclaredField(<span class="string">"myField"</span>);</div><div class="line">        Annotation <span class="keyword">annotation</span><span class="number">2</span> = field.getAnnotation(MyAnnotation.<span class="keyword">class</span>);</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">annotation</span><span class="number">2</span> instanceof  MyAnnotation)</div><div class="line">        &#123;</div><div class="line">            MyAnnotation myAnnotation = (MyAnnotation)<span class="keyword">annotation</span><span class="number">2</span>;</div><div class="line">            System.<span class="keyword">out</span>.println(<span class="string">"name: "</span>+myAnnotation.name());</div><div class="line">            System.<span class="keyword">out</span>.println(<span class="string">"value: "</span>+myAnnotation.<span class="keyword">value</span>());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果：</p>
<p><img src="/blog/images/TheClassResult.png" alt="reuslt"></p>
<h1 id="Generics"><a href="#Generics" class="headerlink" title="Generics"></a>Generics</h1><h2 id="The-Generics-Reflection-Rule-of-Thumb"><a href="#The-Generics-Reflection-Rule-of-Thumb" class="headerlink" title="The Generics Reflection Rule of Thumb"></a>The Generics Reflection Rule of Thumb</h2><p>使用Java泛型通常属于以下两种情况之一：</p>
<ol>
<li>Declaring a class/interface as being parameterizable.（声明类/接口是可参数化的）</li>
<li>Using a parameterizable class.（使用可参数化的类）</li>
</ol>
<h2 id="Generic-Method-Return-Types"><a href="#Generic-Method-Return-Types" class="headerlink" title="Generic Method Return Types"></a>Generic Method Return Types</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="keyword">protected</span> List&lt;String&gt; stringList = ...;</div><div class="line"></div><div class="line">  <span class="keyword">public</span> List&lt;String&gt; getStringList()&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.stringList;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>可以获得getStringList()方法的返回值类型。<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">Method</span> <span class="title">method</span> = <span class="title">MyClass</span>.<span class="title">class</span>.<span class="title">getMethod</span><span class="params">("getStringList", null)</span>;</span></div><div class="line"></div><div class="line"><span class="keyword">Type</span> returnType = <span class="function"><span class="keyword">method</span>.<span class="title">getGenericReturnType</span><span class="params">()</span>;</span></div><div class="line"></div><div class="line"><span class="keyword">if</span>(returnType instanceof ParameterizedType)<span class="comment">&#123;</span></div><div class="line"><span class="comment">    ParameterizedType type = (ParameterizedType) returnType;</span></div><div class="line"><span class="comment">    Type[] typeArguments = type.getActualTypeArguments();</span></div><div class="line"><span class="comment">    for(Type typeArgument : typeArguments)&#123;</span></div><div class="line"><span class="comment">        Class typeArgClass = (Class) typeArgument;</span></div><div class="line"><span class="comment">        System.out.println("typeArgClass = " + typeArgClass);</span></div><div class="line"><span class="comment">    &#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>方法的返回值类型为泛型时，需要使用Method.getGenericReturnType()方法来获得返回类型。</p>
<p>例子：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.iaihe.Generics;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.lang.reflect.Method;</div><div class="line"><span class="keyword">import</span> java.lang.reflect.ParameterizedType;</div><div class="line"><span class="keyword">import</span> java.lang.reflect.Type;</div><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Created by zlshi on 17-11-23.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> MyClass &#123;</div><div class="line">    <span class="keyword">protected</span> List&lt;String&gt; stringList = Arrays.<span class="keyword">asList</span>(<span class="string">"test"</span>);</div><div class="line">    <span class="keyword">public</span> List&lt;String&gt; getStringList()</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.stringList;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">public</span> List&lt;?&gt; test()</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">int</span> testUnGeneric()</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args)<span class="keyword">throws</span> Exception &#123;</div><div class="line">        Method method1 = MyClass.<span class="keyword">class</span>.getDeclaredMethod(<span class="string">"getStringList"</span>);</div><div class="line">        Type type1 = method1.getReturnType(); <span class="comment">//获取不到List里的String类型</span></div><div class="line">        System.out.<span class="keyword">println</span>(type1);</div><div class="line">        type1 = method1.getGenericReturnType();</div><div class="line">        System.out.<span class="keyword">println</span>(type1);</div><div class="line">        <span class="keyword">if</span>(type1 <span class="keyword">instanceof</span> ParameterizedType)&#123;</div><div class="line">            ParameterizedType type = (ParameterizedType) type1;</div><div class="line">            Type[] typeArguments = type.getActualTypeArguments();</div><div class="line">            <span class="keyword">for</span>(Type typeArgument : typeArguments)&#123;</div><div class="line">                <span class="keyword">Class</span> typeArgClass = (<span class="keyword">Class</span>) typeArgument;</div><div class="line">                System.out.<span class="keyword">println</span>(<span class="string">"typeArgClass = "</span> + typeArgClass);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        System.out.<span class="keyword">println</span>(<span class="string">"==================================="</span>);</div><div class="line">        Method method2 = MyClass.<span class="keyword">class</span>.getMethod(<span class="string">"test"</span>,<span class="keyword">null</span>);</div><div class="line">        Type type2 = method2.getGenericReturnType();</div><div class="line">        System.out.<span class="keyword">println</span>(type2);</div><div class="line">        <span class="keyword">if</span>(type2 <span class="keyword">instanceof</span> ParameterizedType)&#123;</div><div class="line">            ParameterizedType type = (ParameterizedType) type2;</div><div class="line">            Type[] typeArguments = type.getActualTypeArguments();</div><div class="line">            <span class="keyword">for</span>(Type typeArgument : typeArguments)&#123;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    <span class="keyword">Class</span> typeArgClass = (<span class="keyword">Class</span>) typeArgument; <span class="comment">//抛出异常</span></div><div class="line">                    System.out.<span class="keyword">println</span>(<span class="string">"typeArgClass = "</span> + typeArgClass);</div><div class="line">                &#125;<span class="keyword">catch</span>(Exception ex)</div><div class="line">                &#123;</div><div class="line">                    System.out.<span class="keyword">println</span>(<span class="string">"ExceptionInfo: "</span>+ex.getMessage());</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        System.out.<span class="keyword">println</span>(<span class="string">"==================================="</span>);</div><div class="line">        Method method3 = MyClass.<span class="keyword">class</span>.getMethod(<span class="string">"testUnGeneric"</span>,<span class="keyword">null</span>);</div><div class="line">        Type type3 = method3.getReturnType(); <span class="comment">//getReturnType()就可以返回类型</span></div><div class="line">        System.out.<span class="keyword">println</span>(type3); <span class="comment">//输出int</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>运行结果：</p>
<p><img src="/blog/images/GenericReturnTypeOfMyClass.png" alt="Generic returnType Method"></p>
<h2 id="Generic-Method-Parameter-Types"><a href="#Generic-Method-Parameter-Types" class="headerlink" title="Generic Method Parameter Types"></a>Generic Method Parameter Types</h2><p>也可以通过反射得到方法中的泛型参数<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> class MyClass &#123;</div><div class="line">  <span class="keyword">protected</span> <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; stringList = <span class="params">...</span>;</div><div class="line"></div><div class="line">  <span class="keyword">public</span> <span class="literal">void</span> setStringList(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; <span class="built_in">list</span>)&#123;</div><div class="line">    this.stringList = <span class="built_in">list</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">method</span> = <span class="title">Myclass</span>.<span class="title">class</span>.<span class="title">getMethod</span><span class="params">("setStringList", List.<span class="keyword">class</span>)</span>;</span></div></pre></td></tr></table></figure>
<p><strong>Type[] genericParameterTypes = method.getGenericParameterTypes();</strong><br><figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(<span class="keyword">Type</span> <span class="type">genericParameterType </span>: genericParameterTypes)&#123;</div><div class="line">    <span class="keyword">if</span>(genericParameterType instanceof ParameterizedType)&#123;</div><div class="line">        ParameterizedType aType = (ParameterizedType) genericParameterType;</div><div class="line">        <span class="keyword">Type</span>[] parameterArgTypes = aType.getActualTypeArguments();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">Type</span> <span class="type">parameterArgType </span>: parameterArgTypes)&#123;</div><div class="line">            Class parameterArgClass = (Class) parameterArgType;</div><div class="line">            System.<span class="keyword">out</span>.println(<span class="string">"parameterArgClass = "</span> + parameterArgClass);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Generic-Field-Types"><a href="#Generic-Field-Types" class="headerlink" title="Generic Field Types"></a>Generic Field Types</h2><figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</div><div class="line">  <span class="keyword">public</span> List&lt;<span class="keyword">String</span>&gt; stringList = ...;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Field field = MyClass.class.getField(<span class="string">"stringList"</span>);</div><div class="line"></div><div class="line">Type genericFieldType = field.getGenericType();</div><div class="line"></div><div class="line"><span class="keyword">if</span>(genericFieldType instanceof ParameterizedType)&#123;</div><div class="line">    ParameterizedType aType = (ParameterizedType) genericFieldType;</div><div class="line">    Type[] fieldArgTypes = aType.getActualTypeArguments();</div><div class="line">    <span class="keyword">for</span>(Type fieldArgType : fieldArgTypes)&#123;</div><div class="line">        Class fieldArgClass = (Class) fieldArgType;</div><div class="line">        System.out.println(<span class="string">"fieldArgClass = "</span> + fieldArgClass);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h1><h2 id="java-lang-reflect-Array"><a href="#java-lang-reflect-Array" class="headerlink" title="java.lang.reflect.Array"></a>java.lang.reflect.Array</h2><p>使用java.lang.reflect.Array类处理数组的反射。</p>
<h2 id="Creating-Arrays"><a href="#Creating-Arrays" class="headerlink" title="Creating Arrays"></a>Creating Arrays</h2><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">int</span>[] intArray = (<span class="built_in">int</span>[]) <span class="built_in">Array</span>.newInstance(<span class="built_in">int</span>.<span class="keyword">class</span>, <span class="number">3</span>);</div></pre></td></tr></table></figure>
<p>第一个参数为数组的类型，第二个参数为数组的大小。</p>
<h2 id="Accessing-Arrays"><a href="#Accessing-Arrays" class="headerlink" title="Accessing Arrays"></a>Accessing Arrays</h2><p>通过Array.get()和Array.set()方法访问数组。<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">int</span>[] intArray = (<span class="built_in">int</span>[]) <span class="keyword">Array</span>.newInstance(<span class="built_in">int</span>.class, <span class="number">3</span>);</div><div class="line"></div><div class="line"><span class="keyword">Array</span>.<span class="built_in">set</span>(intArray, <span class="number">0</span>, <span class="number">123</span>);</div><div class="line"><span class="keyword">Array</span>.<span class="built_in">set</span>(intArray, <span class="number">1</span>, <span class="number">456</span>);</div><div class="line"><span class="keyword">Array</span>.<span class="built_in">set</span>(intArray, <span class="number">2</span>, <span class="number">789</span>);</div><div class="line"></div><div class="line">System.out.<span class="built_in">println</span>(<span class="string">"intArray[0] = "</span> + <span class="keyword">Array</span>.<span class="built_in">get</span>(intArray, <span class="number">0</span>));</div><div class="line">System.out.<span class="built_in">println</span>(<span class="string">"intArray[1] = "</span> + <span class="keyword">Array</span>.<span class="built_in">get</span>(intArray, <span class="number">1</span>));</div><div class="line">System.out.<span class="built_in">println</span>(<span class="string">"intArray[2] = "</span> + <span class="keyword">Array</span>.<span class="built_in">get</span>(intArray, <span class="number">2</span>));</div></pre></td></tr></table></figure></p>
<p>上面的代码会打印：<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attr">intArray[0]</span> = <span class="number">123</span></div><div class="line"><span class="attr">intArray[1]</span> = <span class="number">456</span></div><div class="line"><span class="attr">intArray[2]</span> = <span class="number">789</span></div></pre></td></tr></table></figure></p>
<h2 id="Obtaining-the-Class-Object-of-an-Array"><a href="#Obtaining-the-Class-Object-of-an-Array" class="headerlink" title="Obtaining the Class Object of an Array"></a>Obtaining the Class Object of an Array</h2><p>获取数组的类对象</p>
<p> 对于原始类型：<br><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Class</span> intArray = <span class="keyword">Class</span>.forName(<span class="string">"[I"</span>);</div></pre></td></tr></table></figure></p>
<p>JVM使用I来表示int类型，<code>[</code>表示是一个int数组。其它primitive类型类似。</p>
<p>对于对象：<br><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Class</span> stringArrayClass = <span class="keyword">Class</span>.forName(<span class="string">"[Ljava.lang.String;"</span>);</div></pre></td></tr></table></figure></p>
<p><code>[L</code>表示是对象数组。</p>
<p>不能使用Class.forName()来获得原始类型的类对象，会抛出ClassNotFoundException异常。</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Class</span> intClass1 = <span class="keyword">Class</span>.forName(<span class="string">"I"</span>);</div><div class="line"><span class="keyword">Class</span> intClass2 = <span class="keyword">Class</span>.forName(<span class="string">"int"</span>);</div></pre></td></tr></table></figure>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">Class</span> getClass(String className)&#123;</div><div class="line">  <span class="keyword">if</span>(<span class="string">"int"</span> .equals(className)) <span class="keyword">return</span> <span class="keyword">int</span> .<span class="keyword">class</span>;</div><div class="line">  <span class="keyword">if</span>(<span class="string">"long"</span>.equals(className)) <span class="keyword">return</span> <span class="keyword">long</span>.<span class="keyword">class</span>;</div><div class="line">  ...</div><div class="line">  <span class="keyword">return</span> <span class="keyword">Class</span>.forName(className);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//得到数组中元素的类型</span></div><div class="line"><span class="keyword">Class</span> theClass = getClass(theClassName);</div><div class="line"></div><div class="line"><span class="comment">//得到ltheClass构成的数组对象的类型</span></div><div class="line"><span class="keyword">Class</span> stringArrayClass = <span class="keyword">Array</span>.newInstance(theClass, <span class="number">0</span>).getClass();</div></pre></td></tr></table></figure>
<p>检查是否为数组类型：<br><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Class</span> stringArrayClass = <span class="built_in">Array</span>.newInstance(<span class="built_in">String</span>.<span class="keyword">class</span>, <span class="number">0</span>).getClass();</div><div class="line">System.out.println(<span class="string">"is array: "</span> + stringArrayClass.<span class="built_in">isArray</span>());</div></pre></td></tr></table></figure></p>
<h2 id="Obtaining-the-Component-Type-of-an-Array"><a href="#Obtaining-the-Component-Type-of-an-Array" class="headerlink" title="Obtaining the Component Type of an Array"></a>Obtaining the Component Type of an Array</h2><p>使用Class.getComponentType()获得数组中元素的类型：<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">String[] </span><span class="keyword">strings </span>= new <span class="keyword">String[3];</span></div><div class="line"><span class="keyword">Class </span><span class="keyword">stringArrayClass </span>= <span class="keyword">strings.getClass();</span></div><div class="line"><span class="keyword">Class </span><span class="keyword">stringArrayComponentType </span>= <span class="keyword">stringArrayClass.getComponentType();</span></div><div class="line"><span class="keyword">System.out.println(stringArrayComponentType); </span>// will print java.lang.<span class="keyword">String</span></div></pre></td></tr></table></figure></p>
<h1 id="Dynamic-Proxies"><a href="#Dynamic-Proxies" class="headerlink" title="Dynamic Proxies"></a>Dynamic Proxies</h1><p>使用java.lang.reflect.Proxy可以在运行时创建接口的动态实现。</p>
<h2 id="Creating-Proxies"><a href="#Creating-Proxies" class="headerlink" title="Creating Proxies"></a>Creating Proxies</h2><p>使用Proxy.newProxyInstance()方法来创建动态代理，方法需要如下三个参数：</p>
<ol>
<li>类加载器ClassLoader用来装载动态代理类。</li>
<li>要实现的接口对象数组。</li>
<li>InvocationHandler转发处理代理的方法。</li>
</ol>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">InvocationHandler handler = new MyInvocationHandler();</div><div class="line">MyInterface<span class="built_in"> proxy </span>= (MyInterface) Proxy.newProxyInstance(</div><div class="line">                            MyInterface.class.getClassLoader(),</div><div class="line">                            new Class[] &#123; MyInterface.class &#125;,</div><div class="line">                            handler);</div></pre></td></tr></table></figure>
<h2 id="InvocationHandler’s"><a href="#InvocationHandler’s" class="headerlink" title="InvocationHandler’s"></a>InvocationHandler’s</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">public<span class="built_in"> interface </span>InvocationHandler&#123;</div><div class="line">  Object invoke(Object proxy, Method method, Object[] args)</div><div class="line">         throws Throwable;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInvocationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span></span>&#123;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span></span></div><div class="line"><span class="function">  <span class="keyword">throws</span> Throwable </span>&#123;</div><div class="line">    <span class="comment">//do something "dynamic"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>invoke()中的proxy对象为实现接口的动态代理对象。<br>Method对象表示接口中方法的动态代理实现，可以使用反射得到方法名，参数列表以及返回类型。<br>Object[] args数组表示方法的具体参数对象。</p>
<h2 id="Known-Use-Cases"><a href="#Known-Use-Cases" class="headerlink" title="Known Use Cases"></a>Known Use Cases</h2><p>动态代理的使用情形：</p>
<ul>
<li>Database Connection and Transaction Management</li>
<li>Dynamic Mock Objects for Unit Testing</li>
<li>Adaptation of DI Container to Custom Factory Interfaces</li>
<li>AOP-like Method Interception</li>
</ul>
<h1 id="Dynamic-Class-Loading-and-Reloading"><a href="#Dynamic-Class-Loading-and-Reloading" class="headerlink" title="Dynamic Class Loading and Reloading"></a>Dynamic Class Loading and Reloading</h1><h2 id="The-ClassLoader"><a href="#The-ClassLoader" class="headerlink" title="The ClassLoader"></a>The ClassLoader</h2><p>Java中类的加载由java.lang.ClassLoader的子类完成。当一个类被加载时，它所引用的所有类也被加载。这个类加载模式是递归的，直到所有需要的类都被加载。这可能不是应用程序中的所有类。未引用的类只有在引用时才加载。</p>
<h2 id="The-ClassLoader-Hierarchy"><a href="#The-ClassLoader-Hierarchy" class="headerlink" title="The ClassLoader Hierarchy"></a>The ClassLoader Hierarchy</h2><p>Java中的类加载器被组织成一个层次结构。当您创建新的标准Java ClassLoader时，您必须提供一个父类ClassLoader。如果一个ClassLoader被要求加载一个类，它会要求它的父类加载器加载它。如果父类加载器找不到该类，那么子类加载器将尝试自己加载它。</p>
<h2 id="Class-Loading"><a href="#Class-Loading" class="headerlink" title="Class Loading"></a>Class Loading</h2><p>类加载器在加载类时的步骤如下：</p>
<ol>
<li>Check if the class was already loaded.（检查类是否已经被加载）</li>
<li>If not loaded, ask parent class loader to load the class.（如果没有被加载，则请求父类加载器加载）</li>
<li>If parent class loader cannot load class, attempt to load it in this class loader.（如果父加载器不能加载，则尝试自己加载类）</li>
</ol>
<h2 id="Dynamic-Class-Loading"><a href="#Dynamic-Class-Loading" class="headerlink" title="Dynamic Class Loading"></a>Dynamic Class Loading</h2><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MainClass</span> &#123;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span>&#123;</div><div class="line"></div><div class="line">    ClassLoader classLoader = MainClass.class.getClassLoader();</div><div class="line"></div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        Class aClass = classLoader.loadClass(<span class="string">"MyClass"</span>);</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">"aClass.getName() = "</span> + aClass.getName());</div><div class="line">    &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</div><div class="line">        e.printStackTrace();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Dynamic-Class-Reloading"><a href="#Dynamic-Class-Reloading" class="headerlink" title="Dynamic Class Reloading"></a>Dynamic Class Reloading</h2><p>Java的内置Class加载器在加载之前总是检查一个类是否已经被加载。因此，使用Java的内置类加载器不能重新加载类。重新加载一个类，你将不得不实现你自己的ClassLoader子类。每个加载的类都需要链接。这是使用ClassLoader.resolve（）方法完成的。这个方法是final的，因此不能在你的ClassLoader子类中重写。resolve（）方法将不允许任何给定的ClassLoader实例连接两次相同的类。<br>因此，每次你想重新加载一个类，你都必须使用ClassLoader子类的一个新实例。这不是不可能的，但是在设计类重新加载时需要知道。</p>
<h2 id="Designing-your-Code-for-Class-Reloading"><a href="#Designing-your-Code-for-Class-Reloading" class="headerlink" title="Designing your Code for Class Reloading"></a>Designing your Code for Class Reloading</h2><p>如前所述，您不能使用已经加载该类的ClassLoader重载一个类。因此，您将不得不使用不同的ClassLoader实例重新加载类。加载到Java应用程序中的每个类都由其完全限定的名称（包名称+类名称）和加载它的ClassLoader实例标识。这意味着，类加载器A加载的类MyObject与载类加载器B的MyObject类不是同一个类。<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">MyObject object</span> = (MyObject)</div><div class="line">    myClassReloadingFactory.newInstance(<span class="string">"MyObject"</span>);</div></pre></td></tr></table></figure></p>
<p>如果myClassReloadingFactory对象工厂使用与上面的代码所在的类不同的类加载器重新加载MyObject类，您不能将重新装入的MyObject类的实例转换为对象变量的MyObject类型。由于两个MyObject类用不同的类加载器加载，因此即使它们具有相同的完全限定类名，它们也被视为不同的类。试图将一个类的对象转换为另一个类的引用将导致ClassCastException。</p>
<p>使用如下方式解决：</p>
<ol>
<li>Use an interface as the variable type, and just reload the implementing class.（使用一个接口作为变量类型，并重新加载实现类。）</li>
<li>Use a superclass as the variable type, and just reload a subclass.（使用超类作为变量类型，并重新加载一个子类。）</li>
</ol>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">MyObjectInterface object</span> = (MyObjectInterface)</div><div class="line">    myClassReloadingFactory.newInstance(<span class="string">"MyObject"</span>);</div></pre></td></tr></table></figure>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">MyObjectSuperclass object</span> = (MyObjectSuperclass)</div><div class="line">    myClassReloadingFactory.newInstance(<span class="string">"MyObject"</span>);</div></pre></td></tr></table></figure>
<p>当你的类加载器被要求加载MyObject类时，它也会被要求加载MyObjectInterface类或者MyObjectSuperclass类，因为这些类是从MyObject类中引用的。您的类加载器必须将这些类的加载委托给加载包含接口或超类型变量的类的相同类加载器。</p>
<h2 id="ClassLoader-Load-Reload-Example"><a href="#ClassLoader-Load-Reload-Example" class="headerlink" title="ClassLoader Load / Reload Example"></a>ClassLoader Load / Reload Example</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MyClassLoader</span> <span class="keyword">extends</span> <span class="title">ClassLoader</span></span>&#123;</div><div class="line"></div><div class="line">    public <span class="type">MyClassLoader</span>(<span class="type">ClassLoader</span> parent) &#123;</div><div class="line">        <span class="keyword">super</span>(parent);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public <span class="type">Class</span> loadClass(<span class="type">String</span> name) <span class="keyword">throws</span> <span class="type">ClassNotFoundException</span> &#123;</div><div class="line">        <span class="keyword">if</span>(!<span class="string">"reflection.MyObject"</span>.equals(name))</div><div class="line">                <span class="keyword">return</span> <span class="keyword">super</span>.loadClass(name);</div><div class="line"></div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            <span class="type">String</span> url = <span class="string">"file:C:/data/projects/tutorials/web/WEB-INF/"</span> +</div><div class="line">                            <span class="string">"classes/reflection/MyObject.class"</span>;</div><div class="line">            <span class="type">URL</span> myUrl = <span class="keyword">new</span> <span class="type">URL</span>(url);</div><div class="line">            <span class="type">URLConnection</span> connection = myUrl.openConnection();</div><div class="line">            <span class="type">InputStream</span> input = connection.getInputStream();</div><div class="line">            <span class="type">ByteArrayOutputStream</span> buffer = <span class="keyword">new</span> <span class="type">ByteArrayOutputStream</span>();</div><div class="line">            int data = input.read();</div><div class="line"></div><div class="line">            <span class="keyword">while</span>(data != <span class="number">-1</span>)&#123;</div><div class="line">                buffer.write(data);</div><div class="line">                data = input.read();</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            input.close();</div><div class="line"></div><div class="line">            byte[] classData = buffer.toByteArray();</div><div class="line"></div><div class="line">            <span class="keyword">return</span> defineClass(<span class="string">"reflection.MyObject"</span>,</div><div class="line">                    classData, <span class="number">0</span>, classData.length);</div><div class="line"></div><div class="line">        &#125; <span class="keyword">catch</span> (<span class="type">MalformedURLException</span> e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; <span class="keyword">catch</span> (<span class="type">IOException</span> e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> void main(<span class="keyword">String</span>[] args) throws</div><div class="line">    ClassNotFoundException,</div><div class="line">    IllegalAccessException,</div><div class="line">    InstantiationException &#123;</div><div class="line"></div><div class="line">    ClassLoader parentClassLoader = MyClassLoader.class.getClassLoader();</div><div class="line">    MyClassLoader classLoader = <span class="keyword">new</span> <span class="type">MyClassLoader</span>(parentClassLoader);</div><div class="line">    Class myObjectClass = classLoader.loadClass(<span class="string">"reflection.MyObject"</span>);</div><div class="line"></div><div class="line">    AnInterface2       object1 =</div><div class="line">            (AnInterface2) myObjectClass.<span class="keyword">new</span><span class="type">Instance</span>();</div><div class="line"></div><div class="line">    MyObjectSuperClass object2 =</div><div class="line">            (MyObjectSuperClass) myObjectClass.<span class="keyword">new</span><span class="type">Instance</span>();</div><div class="line"></div><div class="line">    <span class="comment">//create new class loader so classes can be reloaded.</span></div><div class="line">    classLoader = <span class="keyword">new</span> <span class="type">MyClassLoader</span>(parentClassLoader);</div><div class="line">    myObjectClass = classLoader.loadClass(<span class="string">"reflection.MyObject"</span>);</div><div class="line"></div><div class="line">    object1 = (AnInterface2)       myObjectClass.<span class="keyword">new</span><span class="type">Instance</span>();</div><div class="line">    object2 = (MyObjectSuperClass) myObjectClass.<span class="keyword">new</span><span class="type">Instance</span>();</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这是使用类加载器加载的reflection.MyObject类。注意它是如何扩展一个超类并实现一个接口的。<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MyObject</span> <span class="keyword">extends</span> <span class="title">MyObjectSuperClass</span> <span class="title">implements</span> <span class="title">AnInterface2</span></span>&#123;</div><div class="line">    <span class="comment">//... body of class ... override superclass methods</span></div><div class="line">    <span class="comment">//    or implement interface methods</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.iaihe.cn/blog/blog/2017/11/20/Markdown语法说明/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zlshi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MarginStone's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2017/11/20/Markdown语法说明/" itemprop="url">Markdown语法说明</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-20T20:11:48+08:00">
                2017-11-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/工具软件学习/" itemprop="url" rel="index">
                    <span itemprop="name">工具软件学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><table><br>    <tr><br>        <td>Markdown语法</td><br>    </tr><br></table><br><img src="/blog/images/avatar.jpg"><br>&copy;</p>
<h2 id="特殊字符自动转换"><a href="#特殊字符自动转换" class="headerlink" title="特殊字符自动转换"></a>特殊字符自动转换</h2><p>在HTML中&lt; 和&amp;会转换为<code>&amp;lt;</code>和<code>&amp;amp;</code></p>
<h2 id="区块元素"><a href="#区块元素" class="headerlink" title="区块元素"></a>区块元素</h2><h3 id="段落和换行"><a href="#段落和换行" class="headerlink" title="段落和换行"></a>段落和换行</h3><p>一个MarkDown段落是由一个或多个连续的文本行组成，它的前后要有一个以上的空行（空行的定义是显示上看起来像是空的，便会被视为空行。比方说，若某一行只包含空格和制表符，则该行也会被视为空行）。普通段落不该用空格或制表符来缩进。</p>
<p>「由一个或多个连续的文本组成」这句话其实暗示了Markdown允许段落内强迫换行（插入换行符），这个特性和其他大部分的text-to-HTML格式不一样（包括Movable Type的「Convert Line Breaks」选项），其他的格式会把每个换行符都转换成<code>&lt;br/&gt;</code>标签。</p>
<h3 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h3><p>Markdown支持两种标题语法，类Setext和类atx形式。<br>类Setext形式是用底线的形式，利用=（最高阶标题）和-（第二阶标题），例如：<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">This is an H1</div><div class="line">==========</div><div class="line"></div><div class="line">This is an H2</div><div class="line">----------------</div></pre></td></tr></table></figure></p>
<p>任何数量的=和-都可以有效果。<br>效果：</p>
<h1 id="This-is-an-H1"><a href="#This-is-an-H1" class="headerlink" title="This is an H1"></a>This is an H1</h1><h2 id="This-is-an-H2"><a href="#This-is-an-H2" class="headerlink" title="This is an H2"></a>This is an H2</h2><p>类Atx形式则是在行首插入1到6个<code>#</code>，对应标题1到6阶，例如：<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># 这是H1</div><div class="line">## 这是H2</div><div class="line">###### 这是H6</div></pre></td></tr></table></figure></p>
<p>效果：</p>
<h1 id="这是H1"><a href="#这是H1" class="headerlink" title="这是H1"></a>这是H1</h1><h2 id="这是H2"><a href="#这是H2" class="headerlink" title="这是H2"></a>这是H2</h2><h6 id="这是H6"><a href="#这是H6" class="headerlink" title="这是H6"></a>这是H6</h6><p>你可以选择性地「闭合」类atx样式的标题，这纯粹只是美观用的，若是觉得这样看起来比较舒适，你可以在行尾加上<code>#</code>，而行尾的<code>#</code>的数量也不用和开头一样（行首的<code>#</code>字符数量决定标题的阶数）：<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 这是H1 #</div><div class="line">## 这是H2 ##</div></pre></td></tr></table></figure></p>
<h3 id="区块引用-Blockquotes"><a href="#区块引用-Blockquotes" class="headerlink" title="区块引用 Blockquotes"></a>区块引用 Blockquotes</h3><p>Markdown标记区块引用是使用类似email中用<code>&gt;</code>的引用方式。如果你还熟悉在email信件中的引言部分，你就知道怎么在Markdown文件中建立一个区块引用，那会看起来像是你自己先断好行，然后在每行的最前面加上<code>&gt;</code>：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span><span class="bash"> This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,</span></div><div class="line"><span class="meta">&gt;</span><span class="bash"> consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.</span></div><div class="line"><span class="meta">&gt;</span><span class="bash"> Vestibulum enim wisi, viverra nec, fringilla <span class="keyword">in</span>, laoreet vitae, risus.</span></div><div class="line"><span class="meta">&gt;</span><span class="bash"> </span></div><div class="line"><span class="meta">&gt;</span><span class="bash"> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse</span></div><div class="line"><span class="meta">&gt;</span><span class="bash"> id sem consectetuer libero luctus adipiscing.</span></div></pre></td></tr></table></figure></p>
<p>效果：</p>
<blockquote>
<p>This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,<br>consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.<br>Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.</p>
<p>Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse<br>id sem consectetuer libero luctus adipiscing.</p>
</blockquote>
<p>Markdown也允许你偷懒只在整个段落的第一行加上<code>&gt;</code>：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; This <span class="keyword">is</span> a blockquote <span class="keyword">with</span> two <span class="built_in">paragraphs</span>. Lorem ipsum dolor sit amet,</div><div class="line">consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.</div><div class="line">Vestibulum enim wisi, viverra nec, fringilla <span class="keyword">in</span>, laoreet vitae, risus.</div><div class="line"></div><div class="line">&gt; Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse</div><div class="line"><span class="built_in">id</span> sem consectetuer libero luctus adipiscing.</div></pre></td></tr></table></figure></p>
<p>效果：</p>
<blockquote>
<p>This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,<br>consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.<br>Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.<br>Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse<br>id sem consectetuer libero luctus adipiscing.</p>
</blockquote>
<p>区块引用可以嵌套（例如：引用内的引用），只要根据层次加上不同数量的<code>&gt;</code>：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span><span class="bash"> This is first level of quoting.</span></div><div class="line"><span class="meta">&gt;</span><span class="bash"></span></div><div class="line"><span class="meta">&gt;</span><span class="bash">&gt; This is nested blockquote.</span></div><div class="line"><span class="meta">&gt;</span><span class="bash"></span></div><div class="line"><span class="meta">&gt;</span><span class="bash"> Back to the first level.</span></div></pre></td></tr></table></figure></p>
<p>效果：</p>
<blockquote>
<p>This is the first level of quoting.</p>
<blockquote>
<p>This is nested blockquote.</p>
</blockquote>
<p>Back to the first level.</p>
</blockquote>
<p>引用区块内也可以使用其他Markdown语法，包括标题、列表、代码区块等：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span><span class="bash"> <span class="comment">## 这是一个标题。</span></span></div><div class="line"><span class="meta">&gt;</span><span class="bash"></span></div><div class="line"><span class="meta">&gt;</span><span class="bash"> 1. 这是第一行列表项。</span></div><div class="line"><span class="meta">&gt;</span><span class="bash"> 2. 这是第二行列表项。</span></div><div class="line"><span class="meta">&gt;</span><span class="bash"></span></div><div class="line"><span class="meta">&gt;</span><span class="bash"> 给出一些例子代码：</span></div><div class="line"><span class="meta">&gt;</span><span class="bash"></span></div><div class="line"><span class="meta">&gt;</span><span class="bash"> <span class="built_in">return</span> shell_exec(<span class="string">"echo <span class="variable">$input</span> | <span class="variable">$markdown_script</span>"</span>);</span></div></pre></td></tr></table></figure></p>
<p>效果：</p>
<blockquote>
<h2 id="这是一个标题。"><a href="#这是一个标题。" class="headerlink" title="这是一个标题。"></a>这是一个标题。</h2><ol>
<li>这是第一行列表项。</li>
<li>这是第二行列表项。</li>
</ol>
<p>给出一些例子代码：</p>
<p>return shell_exec(“echo $inout | $markdown_script”);</p>
</blockquote>
<h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><p>Markdown支持有序列表和无序列表<br>无序列表使用星号、加号或是减号作为列表标记：<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="bullet">* </span>Red</div><div class="line"><span class="bullet">* </span>Green</div><div class="line"><span class="bullet">* </span>Blue</div></pre></td></tr></table></figure></p>
<p>效果：</p>
<ul>
<li>Red</li>
<li>Green</li>
<li>Blue</li>
</ul>
<p>等同于：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="bullet">+ </span>Red</div><div class="line"><span class="bullet">+ </span>Green</div><div class="line"><span class="bullet">+ </span>Blue</div></pre></td></tr></table></figure></p>
<p>效果:</p>
<ul>
<li>Red</li>
<li>Green</li>
<li>Blue</li>
</ul>
<p>也等同于：<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-<span class="ruby"> Red</span></div><div class="line"><span class="ruby">- Green</span></div><div class="line"><span class="ruby">- Blue</span></div></pre></td></tr></table></figure></p>
<p>效果：</p>
<ul>
<li>Red</li>
<li>Green</li>
<li>Blue</li>
</ul>
<p>有序序号则使用数字接着一个英文句点：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="bullet">1. </span>Bird</div><div class="line"><span class="bullet">2. </span>McHale</div><div class="line"><span class="bullet">3. </span>Parish</div></pre></td></tr></table></figure></p>
<p>效果：</p>
<ol>
<li>Bird</li>
<li>McHale</li>
<li>Parish</li>
</ol>
<p>很重要的一点是，你在列表上使用的数字并不会影响输出的HTML结果，上面的列表所产生的HTML标记为：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>Bird<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>McHale<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>Parish<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>如果你的列表标记写成：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="bullet">1.  </span>Bird</div><div class="line"><span class="bullet">1.  </span>McHale</div><div class="line"><span class="bullet">1.  </span>Parish</div></pre></td></tr></table></figure></p>
<p>或者是：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="bullet">3. </span>Bird</div><div class="line"><span class="bullet">1. </span>McHale</div><div class="line"><span class="bullet">8. </span>Parish</div></pre></td></tr></table></figure></p>
<p>你都会得到完全相同的HTML输出。重点在于，你可以让Markdown文件的列表数字和输出的结果相同，或是你懒一点，你可以完全不用在意数字的正确性。</p>
<p>如果你使用懒惰的写法，建议第一个项目最好还是从1.开始，因为Markdown未来可能会支持有序列表的start属性。</p>
<p>列表项目标记通常是放在最左边，但是其实也可以缩进，做多3个空格，项目标记后面则一定要接着至少一个空格或制表符。</p>
<p>要让列表看起来更漂亮，你可以把内容用固定的缩进整理好：<br><figure class="highlight erlang"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">*   Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</div><div class="line">    Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi,</div><div class="line">    viverra nec, fringilla in, laoreet vitae, risus.</div><div class="line">*   Donec sit amet nisl. Aliquam semper ipsum sit amet velit.</div><div class="line">    Suspendisse id sem consectetuer libero luctus adipiscing.</div></pre></td></tr></table></figure></p>
<p>效果：</p>
<ul>
<li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.<br>Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi,<br>viverra nec, fringilla in, laoreet vitae, risus.</li>
<li>Donec sit amet nisl. Aliquam semper ipsum sit amet velit.<br>Suspendisse id sem consectetuer libero luctus adipiscing.</li>
</ul>
<p>如果项目列表间用空行分开，在输出HTML时Markdown就会将项目内容用<code>&lt;p&gt;</code>标签包起来，举例来说：<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="bullet">* </span>Bird</div><div class="line"><span class="bullet">* </span>Magic</div></pre></td></tr></table></figure></p>
<p>会被转换为：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>Bird<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>Magic<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>但是这个：<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="bullet">*   </span>Bird</div><div class="line"></div><div class="line"><span class="bullet">*   </span>Magic</div></pre></td></tr></table></figure></p>
<p>会被转换为:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Bird<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Magic<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>列表项目可以包含多个段落，每个项目下的段落都必须缩进4个空格或是1个制表符：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span>  This <span class="keyword">is</span> a <span class="built_in">list</span> <span class="built_in">item</span> <span class="keyword">with</span> two <span class="built_in">paragraphs</span>. Lorem ipsum dolor</div><div class="line">    sit amet, consectetuer adipiscing elit. Aliquam hendrerit</div><div class="line">    mi posuere lectus.</div><div class="line"></div><div class="line">    Vestibulum enim wisi, viverra nec, fringilla <span class="keyword">in</span>, laoreet</div><div class="line">    vitae, risus. Donec sit amet nisl. Aliquam semper ipsum</div><div class="line">    sit amet velit.</div><div class="line"><span class="number">2.</span>  Suspendisse <span class="built_in">id</span> sem consectetuer libero luctus adipiscing.</div></pre></td></tr></table></figure></p>
<p>效果：</p>
<ol>
<li><p>This is a list item with two paragraphs. Lorem ipsum dolor<br>sit amet, consectetuer adipiscing elit. Aliquam hendrerit<br>mi posuere lectus.</p>
<p>Vestibulum enim wisi, viverra nec, fringilla in, laoreet<br>vitae, risus. Donec sit amet nisl. Aliquam semper ipsum<br>sit amet velit.</p>
</li>
<li><p>Suspendisse id sem consectetuer libero luctus adipiscing.</p>
</li>
</ol>
<p>如果你每行都有缩进，看起来会好看很多，当然，再次地，如果你很懒惰，Mardown也允许：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">*   This <span class="keyword">is</span> a <span class="built_in">list</span> <span class="built_in">item</span> <span class="keyword">with</span> two <span class="built_in">paragraphs</span>.</div><div class="line"></div><div class="line">    This <span class="keyword">is</span> <span class="keyword">the</span> <span class="keyword">second</span> <span class="built_in">paragraph</span> <span class="keyword">in</span> <span class="keyword">the</span> <span class="built_in">list</span> <span class="built_in">item</span>. You're</div><div class="line">only required <span class="keyword">to</span> indent <span class="keyword">the</span> <span class="keyword">first</span> line. Lorem ipsum dolor</div><div class="line">sit amet, consectetuer adipiscing elit.</div><div class="line"></div><div class="line">*   Another <span class="built_in">item</span> <span class="keyword">in</span> <span class="keyword">the</span> same <span class="built_in">list</span>.</div></pre></td></tr></table></figure></p>
<p>效果：</p>
<ul>
<li><p>This is a list item with two paragraphs.</p>
<p>This is the second paragraph in the list item. You’re<br>only required to indent the first line. Lorem ipsum dolor<br>sit amet, consectetuer adipiscing elit.</p>
</li>
<li><p>Another item in the same list.</p>
</li>
</ul>
<p>如果要在列表项目内放进引用，那<code>&gt;</code>就需要缩进：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">*   A <span class="built_in">list</span> <span class="built_in">item</span> <span class="keyword">with</span> a blockquote:</div><div class="line"></div><div class="line">    &gt; This <span class="keyword">is</span> a blockquote</div><div class="line">    &gt; inside a <span class="built_in">list</span> <span class="built_in">item</span>.</div></pre></td></tr></table></figure></p>
<p>效果：</p>
<ul>
<li><p>A list item with a blockquote:</p>
<blockquote>
<p>This is a blockquote<br>inside a list item.</p>
</blockquote>
<p>如果要放代码区块的话，该区块就需要缩进两次，也就是8个空格或是2个制表符：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">*   一列表项包含一个列表区块：</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">代码写在这</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>效果：</p>
<ul>
<li><p>一列表项包含一个列表区块：</p>
<pre><code>&lt;代码写在这&gt;
</code></pre></li>
</ul>
<p>当然，项目列表很可能会不小心产生像下面这样的写法：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">1986</span>. What <span class="selector-tag">a</span> great season.</div></pre></td></tr></table></figure></p>
<p>效果：</p>
<ol>
<li>What a great season.</li>
</ol>
<p>换句话说，也就是在行首出现数字-句点-空白，要避免这样的状况，你可以在句点前面加上反斜杠。<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">1986</span>\. What <span class="selector-tag">a</span> great season.</div></pre></td></tr></table></figure></p>
<p>效果：</p>
<p>1986. What a great season.</p>
<h3 id="代码区块"><a href="#代码区块" class="headerlink" title="代码区块"></a>代码区块</h3><p>和程序相关的写作或是标签语言原始码通常会有已经排版好的代码区块，通常这些区块我们并不希望它以一般段落文件的方式去排版，而是照原来的样子显示，Markdown会用<code>&lt;pre&gt;</code>和<code>&lt;code&gt;</code>标签来把代码区块包起来。<br>要在Markdown中建立代码区块很简单，只要简单地缩进4个空格或是一个制表符就可以，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">这是一个普通段落：</div><div class="line"></div><div class="line">    这是一个代码区块。</div></pre></td></tr></table></figure></p>
<p>Markdown会转换成：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个普通段落：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span><span class="tag">&lt;<span class="name">code</span>&gt;</span>这是一个代码区块。</div><div class="line"><span class="tag">&lt;/<span class="name">code</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>效果：</p>
<p>这是一个普通段落：</p>

<p><pre><code>这是一个代码区块。<br></code></pre><br>这是一个普通段落：</p>
<pre><code>这是一个代码区
</code></pre><p>这个每行一阶的缩进（4个空格或是1个制表符），都会被移除，例如：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Here <span class="keyword">is</span> an example <span class="keyword">of</span> <span class="literal">AppleScript</span>:</div><div class="line"></div><div class="line">    <span class="keyword">tell</span> <span class="built_in">application</span> <span class="string">"Foo"</span></div><div class="line">        <span class="built_in">beep</span></div><div class="line">    <span class="keyword">end</span> <span class="keyword">tell</span></div></pre></td></tr></table></figure></p>
<p>会被转换为：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;p&gt;Here <span class="keyword">is</span> an example <span class="keyword">of</span> <span class="literal">AppleScript</span>:&lt;/p&gt;</div><div class="line"></div><div class="line">&lt;pre&gt;&lt;code&gt;<span class="keyword">tell</span> <span class="built_in">application</span> <span class="string">"Foo"</span></div><div class="line">    <span class="built_in">beep</span></div><div class="line"><span class="keyword">end</span> <span class="keyword">tell</span></div><div class="line">&lt;/code&gt;&lt;/pre&gt;</div></pre></td></tr></table></figure></p>
<p>效果：</p>
<p>Here is an example of AppleScript:</p>

<p><pre><code>tell application “Foo”<br>    beep<br>end tell<br></code></pre><br>一个代码区块会一直持续到没有缩进的那一行（或是文件结尾）。</p>
<p>在代码区块里面，<code>&amp;</code>、<code>&lt;</code>、和<code>&gt;</code>会自动转成HTML实体，这样的方式让你非常容易使用Markdown插入范例用的HTML原始码，之需要复制粘帖上，再加上缩进就可以了，剩下的Markdown都会帮你处理，例如：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="keyword">div</span> <span class="built_in">class</span>=<span class="string">"footer"</span>&gt;</div><div class="line">       &amp;<span class="keyword">copy</span>; <span class="number">2004</span> Foo Corporation</div><div class="line">   &lt;/<span class="keyword">div</span>&gt;</div></pre></td></tr></table></figure></p>
<p>会被转换为：<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="params">&lt;pre&gt;</span><span class="params">&lt;code&gt;</span><span class="variable">&amp;lt</span>;div class=<span class="string">"footer"</span><span class="variable">&amp;gt</span>;</div><div class="line">    <span class="variable">&amp;amp</span>;copy; <span class="number">2004</span> Foo Corporation</div><div class="line"><span class="variable">&amp;lt</span>;/div<span class="variable">&amp;gt</span>;</div><div class="line"><span class="params">&lt;/code&gt;</span><span class="params">&lt;/pre&gt;</span></div></pre></td></tr></table></figure></p>
<p>效果：</p>
<pre><code> &lt;div class=&quot;footer&quot;&gt;
    &amp;copy; 2004 Foo Corporation
&lt;/div&gt;
</code></pre><p>代码区块中，一般的Markdown语法不会被转换，像是星号便只是星号，这表示你可以很容易地以Markdown语法撰写Markdown语法相关的文件。</p>
<h3 id="分隔线"><a href="#分隔线" class="headerlink" title="分隔线"></a>分隔线</h3><p>你可以在一行中用三个以上的星号、减号、底线来建立一个分隔线，行内不能有其他东西。你也可以在星号或是减号中间插入空格。下面每种写法都可以建立分隔线：<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="string">*</span> <span class="string">*</span> <span class="string">*</span></div><div class="line"><span class="string">***</span></div><div class="line"><span class="string">*****</span></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="bullet">-</span> <span class="bullet">-</span> <span class="bullet">-</span></div><div class="line"><span class="string">_____________</span></div></pre></td></tr></table></figure></p>
<p>效果：</p>
<hr>
<hr>
<hr>
<hr>
<hr>
<hr>
<h2 id="区段元素"><a href="#区段元素" class="headerlink" title="区段元素"></a>区段元素</h2><h3 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h3><p>Markdown支持两种形式的链接语法：行内式和参考式两种形式。<br>不管是哪一种，链接文字都是用[方括号]来标记。</p>
<p>要建立一个行内式的链接，只要在方括号后面紧接着圆括号并插入网址链接即可，如果你还想加上链接的title文字，只要在网址后面，用双引号把title文字包起来即可，例如：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">This is [<span class="string">an example</span>](<span class="link">http://example.com/ "Title"</span>) inline link.</div><div class="line"></div><div class="line">[<span class="string">This link</span>](<span class="link">http://example.net/</span>) has no title attribute.</div></pre></td></tr></table></figure></p>
<p>会产生：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>This is <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://example.com/"</span> <span class="attr">title</span>=<span class="string">"Title"</span>&gt;</span></div><div class="line">an example<span class="tag">&lt;/<span class="name">a</span>&gt;</span> inline link.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://example.net/"</span>&gt;</span>This link<span class="tag">&lt;/<span class="name">a</span>&gt;</span> has no</div><div class="line">title attribute.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>效果：<br>This is <a href="http://example.com/" title="Title" target="_blank" rel="external">an example</a> inline link.</p>
<p><a href="http://example.net/" target="_blank" rel="external">This link</a> has no title attribute.</p>
<p>如果你是要链接到同样主机的资源，你可以使用相对路径：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">See my [<span class="string">About</span>](<span class="link">/about/</span>) page for details.</div></pre></td></tr></table></figure></p>
<p>参考式的链接是在链接文字的括号后面再接上另一个方括号，而第二个方括号里面要填入用以辨识链接的标记：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">This is [<span class="string">an example</span>][<span class="symbol">id</span>] reference-style link.</div></pre></td></tr></table></figure></p>
<p>你也可以选择性地在两个方括号中间加上一个空格：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">This <span class="keyword">is</span> [an example] [<span class="built_in">id</span>] <span class="keyword">reference</span>-style link.</div></pre></td></tr></table></figure></p>
<p>接着，在文件的任意处，你可以把这个标记的链接内容定义出来：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="symbol">id</span>]: <span class="link">http://example.com/  "Optional Title Here"</span></div></pre></td></tr></table></figure></p>
<p>效果：</p>
<p>This is <a href="http://example.com/" title="Optional Title Here" target="_blank" rel="external">an example</a> reference-style link.</p>
<p>This is <a href="http://example.com/" title="Optional Title Here" target="_blank" rel="external">an example</a> reference-style link.<br>链接内容定义的形式为：</p>
<ul>
<li>方括号（前面可以选择性地加上至多三个空格来缩进），里面输入链接文字</li>
<li>接着一个冒号</li>
<li>接着一个以上的空格或制表符</li>
<li>接着链接的地址</li>
<li>选择性地接着title内容，可以用单引号、双引号或是括弧包着<br>下面这三种链接的定义都是相同：<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[<span class="symbol">foo1</span>]: <span class="link">http://example.com/  "Optional Title Here"</span></div><div class="line">[<span class="symbol">foo2</span>]: <span class="link">http://example.com/  'Optional Title Here'</span></div><div class="line">[<span class="symbol">foo3</span>]: <span class="link">http://example.com/  (Optional Title Here)</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>效果：</p>
<p>This is <a href="http://example.com/" title="Optional Title Here" target="_blank" rel="external">foo of first</a><br>[foo2]: <a href="http://example.com/" target="_blank" rel="external">http://example.com/</a>  ‘Optional Title Here’<br>This is [foo of second][foo2]</p>
<p>This is <a href="http://example.com/" title="Optional Title Here" target="_blank" rel="external">foo of third</a><br>链接的网址也可以用尖括号包起来：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="symbol">id</span>]: <span class="link">&lt;http：//example.com/&gt; "Optional Title Here"</span></div></pre></td></tr></table></figure></p>
<p>你也可以把title属性放到下一行，也可以加一些缩进，若网址太长的话，这样会比较好看：<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[id]: <span class="symbol">http:</span>/<span class="regexp">/example.com/longish</span><span class="regexp">/path/to</span><span class="regexp">/resource/here</span></div><div class="line">    <span class="string">"Optional Title Here"</span></div></pre></td></tr></table></figure></p>
<p>网址定义只有在产生链接的时候用到，并不会直接出现在文件之中。<br>链接辨别标签可以有字母、数字、空白和标点符号，但是并不区分大小写，因此下面两个链接是一样的：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[<span class="string">link text</span>][<span class="symbol">a</span>]</div><div class="line">[<span class="string">link text</span>][<span class="symbol">A</span>]</div></pre></td></tr></table></figure></p>
<p>隐式链接标记功能让你可以省略指定链接标记，这种情形下，链接标记会视为等同于链接文字，要用隐式链接标记只要在链接文字后面加上一个空的方括号，如果你要让“Google”链接到<code>google.com</code>,你可以简化成:<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="string">Google</span>][<span class="symbol"></span>]</div></pre></td></tr></table></figure></p>
<p>然后定义链接内容：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="symbol">Google</span>]: <span class="link">http://google.com/</span></div></pre></td></tr></table></figure></p>
<p>由于链接文字可能包含空白，所以这种简化型的标记内也许包含多个单词：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Visit [<span class="string">Daring Fireball</span>][<span class="symbol"></span>] for more information.</div></pre></td></tr></table></figure></p>
<p>然后接着定义链接：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="symbol">Daring Fireball</span>]: <span class="link">http://daringfireball.net/</span></div></pre></td></tr></table></figure></p>
<p>链接的定义可以放在文件中的任何一个地方，我比较偏好直接放在链接出现段落的后面，你也可以把它放在文件最后面，就像是注解一样。<br>下面是一个参考式链接的范例：<br><figure class="highlight prolog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">I</span> get <span class="number">10</span> times more traffic from [<span class="symbol">Google</span>] [<span class="number">1</span>] than from</div><div class="line">[<span class="symbol">Yahoo</span>] [<span class="number">2</span>] or [<span class="symbol">MSN</span>] [<span class="number">3</span>].</div><div class="line"></div><div class="line">  [<span class="number">1</span>]: http://google.com/        <span class="string">"Google"</span></div><div class="line">  [<span class="number">2</span>]: http://search.yahoo.com/  <span class="string">"Yahoo Search"</span></div><div class="line">  [<span class="number">3</span>]: http://search.msn.com/    <span class="string">"MSN Search"</span></div></pre></td></tr></table></figure></p>
<p>如果改成用链接名称的方式写：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">I get 10 times more traffic from [<span class="string">Google</span>][<span class="symbol"></span>] than from</div><div class="line">[<span class="string">Yahoo</span>][<span class="symbol"></span>] or [<span class="string">MSN</span>][<span class="symbol"></span>].</div><div class="line"></div><div class="line">  [google]: http://google.com/        "Google"</div><div class="line">  [yahoo]:  http://search.yahoo.com/  "Yahoo Search"</div><div class="line">  [msn]:    http://search.msn.com/    "MSN Search"</div></pre></td></tr></table></figure></p>
<p>上面两种写法都会产生下面的 HTML。<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;p&gt;I <span class="builtin-name">get</span> 10 times more traffic <span class="keyword">from</span> &lt;a <span class="attribute">href</span>=<span class="string">"http://google.com/"</span></div><div class="line"><span class="attribute">title</span>=<span class="string">"Google"</span>&gt;Google&lt;/a&gt; than <span class="keyword">from</span></div><div class="line">&lt;a <span class="attribute">href</span>=<span class="string">"http://search.yahoo.com/"</span> <span class="attribute">title</span>=<span class="string">"Yahoo Search"</span>&gt;Yahoo&lt;/a&gt;</div><div class="line"><span class="keyword">or</span> &lt;a <span class="attribute">href</span>=<span class="string">"http://search.msn.com/"</span> <span class="attribute">title</span>=<span class="string">"MSN Search"</span>&gt;MSN&lt;/a&gt;.&lt;/p&gt;</div></pre></td></tr></table></figure></p>
<p>下面是用行内式写的同样一段内容的 Markdown 文件，提供作为比较之用：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">I get 10 times more traffic from [<span class="string">Google</span>](<span class="link">http://google.com/ "Google"</span>)</div><div class="line">than from [<span class="string">Yahoo</span>](<span class="link">http://search.yahoo.com/ "Yahoo Search"</span>) or</div><div class="line">[<span class="string">MSN</span>](<span class="link">http://search.msn.com/ "MSN Search"</span>).</div></pre></td></tr></table></figure></p>
<p>参考式的链接其实重点不在于它比较好写，而是它比较好读，比较一下上面的范例，使用参考式的文章本身只有 81 个字符，但是用行内形式的却会增加到 176 个字元，如果是用纯 HTML 格式来写，会有 234 个字元，在 HTML 格式中，标签比文本还要多。</p>
<p>使用 Markdown 的参考式链接，可以让文件更像是浏览器最后产生的结果，让你可以把一些标记相关的元数据移到段落文字之外，你就可以增加链接而不让文章的阅读感觉被打断。</p>
<h3 id="强调"><a href="#强调" class="headerlink" title="强调"></a>强调</h3><p>Markdown使用(<code>*</code>)和(<code>_</code>)作为标记强调字词的符号，被<code>*</code>或<code>_</code>包围的字词会被转成用<code>&lt;em&gt;</code>标签包围，用两个<code>*</code>或<code>_</code>包起来的话，则会被转成<code>&lt;strong&gt;</code>，例如：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="emphasis">*single asterisks*</span></div><div class="line"></div><div class="line"><span class="emphasis">_single underscores_</span></div><div class="line"></div><div class="line"><span class="strong">**double asterisks**</span></div><div class="line"></div><div class="line"><span class="strong">__double underscores__</span></div></pre></td></tr></table></figure></p>
<p>会转成：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">em</span>&gt;</span>single asterisks<span class="tag">&lt;/<span class="name">em</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">em</span>&gt;</span>single underscores<span class="tag">&lt;/<span class="name">em</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span>double asterisks<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span>double underscores<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>效果：</p>
<p><em>single asterisks</em></p>
<p><em>single underscores</em></p>
<p><strong>double asterisks</strong></p>
<p><strong>double underscores</strong></p>
<p>你可以随便用你喜欢的样式，唯一的限制是，你用什么符号开启标签，就要用什么符号结束。<br>强调也可以直接插在文字中间：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">un<span class="number">*f</span>rigging<span class="number">*be</span>lievable</div></pre></td></tr></table></figure></p>
<p>un<em>frigging</em>believable<br>但是<strong>如果你的</strong><code>*</code><strong>和</strong><code>_</code><strong>两边都有空白的话，它们只会被当成普通的符号。</strong><br>如果要在文字前后直接插入普通的星号或底线，你可以用反斜线：<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">\*<span class="keyword">this</span> text <span class="keyword">is</span> surrounded <span class="keyword">by</span> literal asterisks\*</div></pre></td></tr></table></figure></p>
<p>*this text is surrounded by literal asterisks*</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p>如果要标记一小段行内代码，你可以用反引号把它包起来（<code>`</code>)，例如：<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Use</span> the `printf()` <span class="function"><span class="keyword">function</span>.</span></div></pre></td></tr></table></figure></p>
<p>会产生：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Use the <span class="tag">&lt;<span class="name">code</span>&gt;</span>printf()<span class="tag">&lt;/<span class="name">code</span>&gt;</span> function.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>效果：<br>Use the <code>printf()</code> function.<br>如果要在代码区段内插入反引号，你可以用多个反引号来开启和结束代码区段：<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">``There is a literal backtick (`) here.``</div></pre></td></tr></table></figure></p>
<p>这段语法会产生：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;p&gt;<span class="xml"><span class="tag">&lt;<span class="name">code</span>&gt;</span>There is a literal backtick (`) here.<span class="tag">&lt;/<span class="name">code</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p>效果：</p>
<p><code>There is a literal backtick (`) here.</code></p>
<p>代码区段的起始和结束端都可以放入一个空白，起始端后面一个，结束端前面一个，这样你就可以在区段的一开始就插入反引号：<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">A single backtick <span class="keyword">in</span> a <span class="keyword">code</span> span: `` ` ``</div><div class="line"></div><div class="line">A backtick-delimited string <span class="keyword">in</span> a <span class="keyword">code</span> span: `` `foo` ``</div></pre></td></tr></table></figure></p>
<p>会产生：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;p&gt;A single backtick <span class="keyword">in</span> <span class="selector-tag">a</span> <span class="selector-tag">code</span> <span class="selector-tag">span</span>: &lt;code&gt;`&lt;/code&gt;&lt;/p&gt;</div><div class="line"></div><div class="line">&lt;p&gt;A backtick-delimited string <span class="keyword">in</span> <span class="selector-tag">a</span> <span class="selector-tag">code</span> <span class="selector-tag">span</span>: &lt;code&gt;`foo`&lt;/code&gt;&lt;/p&gt;</div></pre></td></tr></table></figure></p>
<p>效果：</p>
<p>A single backtick in a code span: <code>` </code></p>
<p>A backtick-delimited string in a code span: <code>`foo` </code></p>
<p>在代码区段内，&amp; 和尖括号都会被自动地转成 HTML 实体，这使得插入 HTML 原始码变得很容易，Markdown 会把下面这段：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Please don't <span class="keyword">use</span> <span class="keyword">any</span> <span class="string">`&lt;blink&gt;`</span> tags.</div></pre></td></tr></table></figure></p>
<p>转为：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Please don't use any <span class="tag">&lt;<span class="name">code</span>&gt;</span>&amp;lt;blink&amp;gt;<span class="tag">&lt;/<span class="name">code</span>&gt;</span> tags.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>效果：</p>
<p>Please don’t use any <code>&lt;blink&gt;</code> tags.</p>
<p>你也可以这样写：<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">`&amp;#<span class="number">8212</span>;` is the decimal-encoded equivalent <span class="keyword">of</span> `&amp;mdash;`.</div></pre></td></tr></table></figure></p>
<p>以产生：<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="params">&lt;p&gt;</span><span class="params">&lt;code&gt;</span><span class="variable">&amp;amp</span>;<span class="meta">#8212;&lt;/code&gt; is the decimal-encoded</span></div><div class="line">equivalent of <span class="params">&lt;code&gt;</span><span class="variable">&amp;amp</span>;mdash;<span class="params">&lt;/code&gt;</span>.<span class="params">&lt;/p&gt;</span></div></pre></td></tr></table></figure></p>
<p>效果：</p>
<p><code>&amp;#8212;</code> is the decimal-encoded equivalent of <code>&amp;mdash;</code>.</p>
<h3 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h3><p>很明显地，要在纯文字应用中设计一个「自然」的语法来插入图片是有一定难度的。</p>
<p>Markdown 使用一种和链接很相似的语法来标记图片，同样也允许两种样式： 行内式和参考式。</p>
<p>行内式的图片语法看起来像是：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">![<span class="string">Alt text</span>](<span class="link">/path/to/img.jpg</span>)</div><div class="line"></div><div class="line">![<span class="string">Alt text</span>](<span class="link">/path/to/img.jpg "Optional title"</span>)</div></pre></td></tr></table></figure></p>
<p>详细叙述如下：</p>
<ul>
<li>一个感叹号<code>!</code></li>
<li>接着一个方括号，里面放上图片的替代文字</li>
<li>接着一个普通括号，里面放上图片的网址，最后还可以用引号包住并加上选择性的’title’文字。</li>
</ul>
<p>参考式的图片语法则长得像这样：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">![<span class="string">Alt text</span>][<span class="symbol">id</span>]</div></pre></td></tr></table></figure></p>
<p>「id」是图片参考的名称，图片参考的定义方式则和连结参考一样：<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="built_in">id</span>]: url/<span class="keyword">to</span>/image  <span class="string">"Optional title attribute"</span></div></pre></td></tr></table></figure></p>
<p><img src="/blog/images/avatar.jpg" alt="水滴"><br><strong>到目前为止， Markdown 还没有办法指定图片的宽高，如果你需要的话，你可以使用普通的 <code>&lt;img&gt;</code>标签。</strong></p>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><h3 id="自动链接"><a href="#自动链接" class="headerlink" title="自动链接"></a>自动链接</h3><p>Markdown 支持以比较简短的自动链接形式来处理网址和电子邮件信箱，只要是用尖括号包起来， Markdown 就会自动把它转成链接。一般网址的链接文字就和链接地址一样，例如：<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="string">http:</span><span class="comment">//example.com/&gt;</span></div></pre></td></tr></table></figure></p>
<p>Markdown 会转为：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="selector-tag">a</span> href=<span class="string">"http://example.com/"</span>&gt;http:<span class="comment">//example.com/&lt;/a&gt;</span></div></pre></td></tr></table></figure></p>
<p>效果：</p>
<p><a href="http://www.baidu.com/" target="_blank" rel="external">http://www.baidu.com/</a></p>
<p>邮址的自动链接也很类似，只是 Markdown 会先做一个编码转换的过程，把文字字符转成 16 进位码的 HTML 实体，这样的格式可以糊弄一些不好的邮址收集机器人，例如：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="selector-tag">address</span>@<span class="keyword">example</span>.<span class="keyword">com</span>&gt;</div></pre></td></tr></table></figure></p>
<p>Markdown 会转成：<br><figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;a href=<span class="string">"&amp;#x6D;&amp;#x61;i&amp;#x6C;&amp;#x74;&amp;#x6F;:&amp;#x61;&amp;#x64;&amp;#x64;&amp;#x72;&amp;#x65;</span></div><div class="line"><span class="string">&amp;#115;&amp;#115;&amp;#64;&amp;#101;&amp;#120;&amp;#x61;&amp;#109;&amp;#x70;&amp;#x6C;e&amp;#x2E;&amp;#99;&amp;#111;</span></div><div class="line"><span class="string">&amp;#109;"</span>&gt;&amp;<span class="attr">#x61</span>;&amp;<span class="attr">#x64</span>;&amp;<span class="attr">#x64</span>;&amp;<span class="attr">#x72</span>;&amp;<span class="attr">#x65</span>;&amp;<span class="attr">#115</span>;&amp;<span class="attr">#115</span>;&amp;<span class="attr">#64</span>;&amp;<span class="attr">#101</span>;&amp;<span class="attr">#120</span>;&amp;<span class="attr">#x61</span>;</div><div class="line">&amp;<span class="attr">#109</span>;&amp;<span class="attr">#x70</span>;&amp;<span class="attr">#x6</span>C;e&amp;<span class="attr">#x2</span>E;&amp;<span class="attr">#99</span>;&amp;<span class="attr">#111</span>;&amp;<span class="attr">#109</span>;&lt;/a&gt;</div></pre></td></tr></table></figure></p>
<p>效果：<br><a href="&#109;&#97;&#x69;&#x6c;&#x74;&#x6f;&#58;&#x61;&#100;&#x64;&#x72;&#x65;&#115;&#x73;&#64;&#101;&#x78;&#x61;&#x6d;&#x70;&#x6c;&#101;&#46;&#x63;&#111;&#109;">&#x61;&#100;&#x64;&#x72;&#x65;&#115;&#x73;&#64;&#101;&#x78;&#x61;&#x6d;&#x70;&#x6c;&#101;&#46;&#x63;&#111;&#109;</a></p>
<p>在浏览器里面，这段字串（其实是 <code>&lt;a href=&quot;mailto:address@example.com&quot;&gt;address@example.com&lt;/a&gt;</code>）会变成一个可以点击的「address@example.com」链接。</p>
<p>（这种作法虽然可以糊弄不少的机器人，但并不能全部挡下来，不过总比什么都不做好些。不管怎样，公开你的信箱终究会引来广告信件的。）</p>
<h3 id="反斜杠"><a href="#反斜杠" class="headerlink" title="反斜杠"></a>反斜杠</h3><p>Markdown 可以利用反斜杠来插入一些在语法中有其它意义的符号，例如：如果你想要用星号加在文字旁边的方式来做出强调效果（但不用 <em> 标签），你可以在星号的前面加上反斜杠：<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">\*literal</span> asterisks<span class="string">\*</span></div></pre></td></tr></table></figure></em></p>
<p>效果：</p>
<p>*literal asterisks*</p>
<p>Markdown 支持以下这些符号前面加上反斜杠来帮助插入普通的符号：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">\   反斜线</div><div class="line">`   反引号</div><div class="line"><span class="bullet">*   </span>星号</div><div class="line">_   底线</div><div class="line">&#123;&#125;  花括号</div><div class="line">[]  方括号</div><div class="line">()  括弧</div><div class="line"><span class="section">#   井字号</span></div><div class="line"><span class="bullet">+   </span>加号</div><div class="line"><span class="bullet">-   </span>减号</div><div class="line">.   英文句点</div><div class="line">!   惊叹号</div></pre></td></tr></table></figure></p>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p><a href="https://stackoverflow.com/questions/4823468/comments-in-markdown/4829998#4829998" title="Markdown注释" target="_blank" rel="external">stackoverflow markdown注释</a>单行<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[<span class="symbol">//</span>]: <span class="link"># "Comment"</span></div><div class="line">[<span class="symbol">//</span>]: <span class="link"># (Comment)</span></div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.iaihe.cn/blog/blog/2017/11/09/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zlshi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MarginStone's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2017/11/09/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-09T14:45:44+08:00">
                2017-11-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/Hexo/" itemprop="url" rel="index">
                    <span itemprop="name">Hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.iaihe.cn/blog/blog/2017/07/16/vagrant-e4-bb-8b-e7-bb-8d-e4-b8-8e-e4-bd-bf-e7-94-a8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zlshi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MarginStone's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2017/07/16/vagrant-e4-bb-8b-e7-bb-8d-e4-b8-8e-e4-bd-bf-e7-94-a8/" itemprop="url">Vagrant介绍与使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-16T13:09:36+08:00">
                2017-07-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/问题笔记/" itemprop="url" rel="index">
                    <span itemprop="name">问题笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Vagrant是自动配置虚拟机的软件，定义好Vagrantfile配置文件 即可通过vagrant up启动一批虚拟机环境。在多人协作开发时可以通过配置来保证每个开发人员构建的机器环境一致<br>参考官网<a href="https://www.vagrantup.com/intro/getting-started/index.html" target="_blank" rel="external">vagrant</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.iaihe.cn/blog/blog/2017/07/11/linux-e5-b1-8f-e5-b9-95-e6-88-aa-e5-9b-be/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zlshi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MarginStone's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2017/07/11/linux-e5-b1-8f-e5-b9-95-e6-88-aa-e5-9b-be/" itemprop="url">Linux屏幕截图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-11T17:03:36+08:00">
                2017-07-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/工具软件学习/" itemprop="url" rel="index">
                    <span itemprop="name">工具软件学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>使用命令截图 安装scrot后</li>
<li>scrot -s filename.png  鼠标选择窗口</li>
<li>对于KDE桌面可以使用spectcale</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.iaihe.cn/blog/blog/2016/05/08/fft-e7-90-86-e8-a7-a3-e5-ae-9e-e7-8e-b0-e5-8f-8a-e5-ba-94-e7-94-a8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zlshi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MarginStone's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2016/05/08/fft-e7-90-86-e8-a7-a3-e5-ae-9e-e7-8e-b0-e5-8f-8a-e5-ba-94-e7-94-a8/" itemprop="url">FFT理解实现及应用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-08T20:39:00+08:00">
                2016-05-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/算法/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>FFT的理解参考算法导论与<a href="http://www.mengchunlei.net/2015/07/04/fft%E7%9A%84%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3/" target="_blank" rel="external">FFT的简单理解</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.iaihe.cn/blog/blog/2016/04/24/flyweight-e4-ba-ab-e5-85-83-e5-af-b9-e8-b1-a1-e7-bb-93-e6-9e-84-e5-9e-8b-e6-a8-a1-e5-bc-8f/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zlshi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MarginStone's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2016/04/24/flyweight-e4-ba-ab-e5-85-83-e5-af-b9-e8-b1-a1-e7-bb-93-e6-9e-84-e5-9e-8b-e6-a8-a1-e5-bc-8f/" itemprop="url">FLYWEIGHT(享元)---对象结构型模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-24T21:25:10+08:00">
                2016-04-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/设计模式/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/blog/page/2/">2</a><a class="extend next" rel="next" href="/blog/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/blog/images/avatar.jpg"
                alt="zlshi" />
            
              <p class="site-author-name" itemprop="name">zlshi</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/blog/archives/">
              
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/blog/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/blog/tags/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/shizl92" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:zlshi9219@gmail.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zlshi</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/blog/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/blog/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/blog/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  
    

    
  





  









<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/blog/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
